[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Documento Metodológico: Construcción de Indicadores y Gráficos para el Foro II sobre Cohesión Social y Migración",
    "section": "",
    "text": "Presentación\nEste documento presenta el sustento analítico y técnico de los indicadores y gráficos incluidos en la nota. En él se detallan las definiciones conceptuales y metodológicas utilizadas, así como la exploración de los indicadores vinculados a las dimensiones de cohesión social horizontal y a las actitudes hacia la migración. Además, se explicitan los criterios empleados para la recategorización de los valores que dieron origen a las visualizaciones presentadas.",
    "crumbs": [
      "Presentación"
    ]
  },
  {
    "objectID": "migracion-rev.html",
    "href": "migracion-rev.html",
    "title": "1  Dimensión: Seguridad pública",
    "section": "",
    "text": "1.1 Data\nEl objetivo de este script es mostrar las decisiones metodológicas para la construcción de los subíndices de migración y seguridad para la producción de figuras con la información que se muestra en el siguiente gráfico, que está en la presentación de la CEP 2025:\nhttps://ocscoes.github.io/propuesta-medicion-elsoc/presentations/CEP_2025/cep_2025.html#/5/1\nCall original dataset\nload(here('input/data/raw_data/elsoc.RData'))\nelsoc_long &lt;- elsoc_long_2016_2023 # acortar\n\nmissing_codes &lt;- c(-999, -888, -777, -666)\nelsoc_long &lt;- elsoc_long %&gt;%\n  mutate(across(everything(), ~ sjlabelled::set_na(.x, na = missing_codes)))",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Dimensión: Seguridad pública</span>"
    ]
  },
  {
    "objectID": "migracion-rev.html#data",
    "href": "migracion-rev.html#data",
    "title": "1  Dimensión: Seguridad subjetiva y Variables de migración",
    "section": "1.2 Data",
    "text": "1.2 Data\nCall original dataset\n\nload(here('input/data/raw_data/elsoc.RData'))\nelsoc_long &lt;- elsoc_long_2016_2023 # acortar\n\nmissing_codes &lt;- c(-999, -888, -777, -666)\nelsoc_long &lt;- elsoc_long %&gt;%\n  mutate(across(everything(), ~ sjlabelled::set_na(.x, na = missing_codes)))",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Dimensión: Seguridad subjetiva y Variables de migración</span>"
    ]
  },
  {
    "objectID": "migracion-rev.html#univariados-variables",
    "href": "migracion-rev.html#univariados-variables",
    "title": "1  Dimensión: Seguridad pública",
    "section": "2.1 Univariados: Variables",
    "text": "2.1 Univariados: Variables\nLa dimensión de seguridad subjetiva se asocia a los siguientes ítems\n\nSatisfacción con la seguridad del barrio\nPercepción de inseguridad en el barrio\n\nDonde:\n\nfind_var(data = elsoc_long,\"barrio\") # corresponde a t06_01\nfrq(elsoc_long$t06_01)\nfind_var(data = elsoc_long,\"seguridad\") # corresponde a t10\nfrq(elsoc_long$t10)\n\nPor su parte, las variables de migración que preguntan por la percepción en torno a la relación entre desempleo y migración, y por la restricción a migrantes:\n\nfind_var(data = elsoc_long,\"desem\") # corresponde a r12_04\nfrq(elsoc_long$r12_04)\n\nfind_var(data = elsoc_long,\"restr\") # corresponde a c37_05\nfrq(elsoc_long$c37_05)",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Dimensión: Seguridad pública</span>"
    ]
  },
  {
    "objectID": "migracion-rev.html#selección-missings-y-recodificación",
    "href": "migracion-rev.html#selección-missings-y-recodificación",
    "title": "1  Dimensión: Seguridad pública",
    "section": "2.2 Selección, missings y recodificación",
    "text": "2.2 Selección, missings y recodificación\n\ncheck1 &lt;- elsoc_long %&gt;%\n  select(t06_01, t10, r12_04, ola, c37_05)\n\n# cheq\nfrq(check1$r12_04) # ok\n\nGrado de acuerdo: Con llegada de [PER/HAI/VEN] aumenta el desempleo (x) &lt;numeric&gt; \n# total N=20761 valid N=20456 mean=3.23 sd=1.17\n\nValue |                          Label |    N | Raw % | Valid % | Cum. %\n------------------------------------------------------------------------\n    1 |       Totalmente en desacuerdo | 1325 |  6.38 |    6.48 |   6.48\n    2 |                  En desacuerdo | 5781 | 27.85 |   28.26 |  34.74\n    3 | Ni en desacuerdo ni de acuerdo | 2594 | 12.49 |   12.68 |  47.42\n    4 |                     De acuerdo | 8338 | 40.16 |   40.76 |  88.18\n    5 |          Totalmente de acuerdo | 2418 | 11.65 |   11.82 | 100.00\n &lt;NA&gt; |                           &lt;NA&gt; |  305 |  1.47 |    &lt;NA&gt; |   &lt;NA&gt;\n\nfrq(check1$c37_05)\n\nGrado de acuerdo: restricciones ingreso migrantes (x) &lt;numeric&gt; \n# total N=20761 valid N=9532 mean=3.92 sd=1.01\n\nValue |                          Label |     N | Raw % | Valid % | Cum. %\n-------------------------------------------------------------------------\n    1 |       Totalmente en desacuerdo |   239 |  1.15 |    2.51 |   2.51\n    2 |                  En desacuerdo |   945 |  4.55 |    9.91 |  12.42\n    3 | Ni de acuerdo ni en desacuerdo |  1004 |  4.84 |   10.53 |  22.95\n    4 |                     De acuerdo |  4519 | 21.77 |   47.41 |  70.36\n    5 |          Totalmente de acuerdo |  2825 | 13.61 |   29.64 | 100.00\n &lt;NA&gt; |                           &lt;NA&gt; | 11229 | 54.09 |    &lt;NA&gt; |   &lt;NA&gt;",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Dimensión: Seguridad pública</span>"
    ]
  },
  {
    "objectID": "migracion-rev.html#generar-índice-de-seguridad-subjetiva",
    "href": "migracion-rev.html#generar-índice-de-seguridad-subjetiva",
    "title": "1  Dimensión: Seguridad pública",
    "section": "2.3 Generar índice de seguridad subjetiva",
    "text": "2.3 Generar índice de seguridad subjetiva\n\ncheck1$seg_sub &lt;- rowMeans(check1[,c(\"t06_01\",\"t10\")], na.rm = TRUE) \n\nslice(check1,1:10) %&gt;% select(t06_01,t10,seg_sub, ola) # check ok\n\n   t06_01 t10 seg_sub ola\n1       2   3     2.5   1\n2       3   3     3.0   1\n3       3   2     2.5   1\n4       1   3     2.0   1\n5       1   1     1.0   1\n6       1   1     1.0   1\n7       3   3     3.0   1\n8       3   3     3.0   1\n9       1   3     2.0   1\n10      2   3     2.5   1\n\n\n\nfrq(check1$seg_sub) # ok\n\nx &lt;numeric&gt; \n# total N=20761 valid N=19588 mean=3.42 sd=0.97\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n 1.00 |  500 |  2.41 |    2.55 |   2.55\n 1.50 |  622 |  3.00 |    3.18 |   5.73\n 2.00 | 2060 |  9.92 |   10.52 |  16.24\n 2.50 | 1387 |  6.68 |    7.08 |  23.33\n 3.00 | 3063 | 14.75 |   15.64 |  38.96\n 3.50 | 1959 |  9.44 |   10.00 |  48.96\n 4.00 | 7309 | 35.21 |   37.31 |  86.28\n 4.50 | 1473 |  7.10 |    7.52 |  93.80\n 5.00 | 1215 |  5.85 |    6.20 | 100.00\n &lt;NA&gt; | 1173 |  5.65 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\nDe acuerdo con la distribución observada de los valores del índice de seguridad subjetiva, se aprecia que hasta el valor 3.00 se acumula aproximadamente un 39% de los casos, mientras que los valores superiores a 3 concentran el 61% restante. Este patrón respalda empíricamente la decisión de establecer un punto de corte en 3, distinguiendo entre un grupo bajo (≤ 3) y uno alto (&gt; 3). El criterio no solo asegura una diferenciación significativa en términos de frecuencia relativa, sino que además se alinea con la lógica de la escala, en la cual el valor tres constituye un punto de referencia intermedio.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Dimensión: Seguridad pública</span>"
    ]
  },
  {
    "objectID": "migracion-rev.html#variación-por-ola",
    "href": "migracion-rev.html#variación-por-ola",
    "title": "1  Dimensión: Seguridad pública",
    "section": "2.4 Variación por ola",
    "text": "2.4 Variación por ola\n\nfrq(check1$ola) # ok\n\nIdentificador de ola de encuesta (x) &lt;numeric&gt; \n# total N=20761 valid N=20761 mean=3.95 sd=1.94\n\nValue | Label |    N | Raw % | Valid % | Cum. %\n-----------------------------------------------\n    1 |  2016 | 2927 | 14.10 |   14.10 |  14.10\n    2 |  2017 | 2473 | 11.91 |   11.91 |  26.01\n    3 |  2018 | 3748 | 18.05 |   18.05 |  44.06\n    4 |  2019 | 3417 | 16.46 |   16.46 |  60.52\n    5 |  2021 | 2740 | 13.20 |   13.20 |  73.72\n    6 |  2022 | 2730 | 13.15 |   13.15 |  86.87\n    7 |  2023 | 2726 | 13.13 |   13.13 | 100.00\n &lt;NA&gt; |  &lt;NA&gt; |    0 |  0.00 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n# Tabla con el promedio de seguridad subjetiva por ola\nseguridad_por_ola &lt;- check1 %&gt;%\n  group_by(ola) %&gt;%\n  summarise(promedio_seg_subjetiva = mean(seg_sub, na.rm = TRUE)) \n\nif (!exists(\"table_format\")) table_format &lt;- \"simple\"\n\nknitr::kable(seguridad_por_ola, format = table_format, caption = \"Promedio de seguridad subjetiva por ola\")\n\n\nPromedio de seguridad subjetiva por ola\n\n\nola\npromedio_seg_subjetiva\n\n\n\n\n1\n3.276734\n\n\n2\n3.375253\n\n\n3\n3.389408\n\n\n4\n3.509804\n\n\n5\n3.633102\n\n\n6\n3.342146\n\n\n7\n3.487697\n\n\n\n\n\nLos promedios de seguridad subjetiva por ola permanecen relativamente estables (rango 3.28–3.63; promedio global = 3.43, DE ≈ 0.11), indicando un patrón general de percepción ligeramente superior al punto medio de la escala. No obstante, la distribución individual muestra que alrededor del 39% de los casos se ubica en ≤3, por lo que se adoptó el umbral ≤3 / &gt;3 para diferenciar grupos con baja vs. alta seguridad subjetiva. Este corte combina justificación empírica (frecuencias acumuladas) y coherencia conceptual con la métrica usada.\nA continuación se presentan tablas que muestran el promedio de seguridad subjetiva por ola para cada categoría de respuesta en c37_05 y r12_04\n\n# Tabla con el promedio de seguridad subjetiva por ola y por categorías de c37_05 (restricción migrantes) y r12_04 (desempleo migrantes)\nseguridad_por_ola_migracion &lt;- check1 %&gt;%\n  group_by(ola, c37_05, r12_04) %&gt;%\n  summarise(promedio_seg_subjetiva = mean(seg_sub, na.rm = TRUE), n = n()) %&gt;%\n  ungroup()\n\nknitr::kable(seguridad_por_ola_migracion, format = table_format, caption = \"Promedio de seguridad subjetiva por ola y categoría de migración (c37_05)\")\n\n\nPromedio de seguridad subjetiva por ola y categoría de migración (c37_05)\n\n\nola\nc37_05\nr12_04\npromedio_seg_subjetiva\nn\n\n\n\n\n1\n\n1\n3.274590\n122\n\n\n1\n\n2\n3.322000\n750\n\n\n1\n\n3\n3.365385\n338\n\n\n1\n\n4\n3.264883\n1327\n\n\n1\n\n5\n3.140532\n338\n\n\n1\n\n\n3.240385\n52\n\n\n2\n\n1\n3.504854\n206\n\n\n2\n\n2\n3.434846\n683\n\n\n2\n\n3\n3.400000\n295\n\n\n2\n\n4\n3.299888\n897\n\n\n2\n\n5\n3.339542\n349\n\n\n2\n\n\n3.500000\n43\n\n\n3\n1\n1\n3.600000\n30\n\n\n3\n1\n2\n3.047619\n21\n\n\n3\n1\n3\n3.187500\n8\n\n\n3\n1\n4\n3.666667\n18\n\n\n3\n1\n5\n4.000000\n9\n\n\n3\n1\n\n4.062500\n8\n\n\n3\n2\n1\n3.426471\n34\n\n\n3\n2\n2\n3.611570\n121\n\n\n3\n2\n3\n3.560606\n33\n\n\n3\n2\n4\n3.350877\n57\n\n\n3\n2\n5\n3.363636\n11\n\n\n3\n2\n\n3.625000\n8\n\n\n3\n3\n1\n3.326087\n23\n\n\n3\n3\n2\n3.404762\n126\n\n\n3\n3\n3\n3.582090\n67\n\n\n3\n3\n4\n3.439189\n74\n\n\n3\n3\n5\n3.823529\n17\n\n\n3\n3\n\n3.769231\n13\n\n\n3\n4\n1\n3.714286\n42\n\n\n3\n4\n2\n3.533613\n238\n\n\n3\n4\n3\n3.513245\n151\n\n\n3\n4\n4\n3.347778\n450\n\n\n3\n4\n5\n3.205882\n51\n\n\n3\n4\n\n3.291667\n24\n\n\n3\n5\n1\n3.760870\n23\n\n\n3\n5\n2\n3.398148\n108\n\n\n3\n5\n3\n3.275510\n49\n\n\n3\n5\n4\n3.381423\n253\n\n\n3\n5\n5\n3.297794\n136\n\n\n3\n5\n\n3.681818\n11\n\n\n3\n\n1\n3.424812\n133\n\n\n3\n\n2\n3.421320\n394\n\n\n3\n\n3\n3.352792\n197\n\n\n3\n\n4\n3.212413\n572\n\n\n3\n\n5\n3.301980\n202\n\n\n3\n\n\n3.500000\n36\n\n\n4\n1\n1\n3.638889\n36\n\n\n4\n1\n2\n3.482759\n29\n\n\n4\n1\n3\n3.125000\n4\n\n\n4\n1\n4\n3.333333\n9\n\n\n4\n1\n5\n3.500000\n6\n\n\n4\n1\n\n2.000000\n1\n\n\n4\n2\n1\n3.595238\n42\n\n\n4\n2\n2\n3.675141\n177\n\n\n4\n2\n3\n3.585714\n35\n\n\n4\n2\n4\n3.508197\n61\n\n\n4\n2\n5\n3.850000\n10\n\n\n4\n2\n\n4.000000\n2\n\n\n4\n3\n1\n3.803030\n33\n\n\n4\n3\n2\n3.586066\n122\n\n\n4\n3\n3\n3.611842\n76\n\n\n4\n3\n4\n3.421053\n76\n\n\n4\n3\n5\n3.400000\n10\n\n\n4\n3\n\n4.000000\n1\n\n\n4\n4\n1\n3.687500\n32\n\n\n4\n4\n2\n3.547826\n230\n\n\n4\n4\n3\n3.413223\n121\n\n\n4\n4\n4\n3.456653\n496\n\n\n4\n4\n5\n3.538961\n77\n\n\n4\n4\n\n4.214286\n7\n\n\n4\n5\n1\n3.944444\n18\n\n\n4\n5\n2\n3.611111\n54\n\n\n4\n5\n3\n3.810811\n37\n\n\n4\n5\n4\n3.472826\n184\n\n\n4\n5\n5\n3.346405\n153\n\n\n4\n5\n\n3.900000\n5\n\n\n4\n\n1\n3.666667\n90\n\n\n4\n\n2\n3.596866\n351\n\n\n4\n\n3\n3.447917\n144\n\n\n4\n\n4\n3.437259\n518\n\n\n4\n\n5\n3.300633\n158\n\n\n4\n\n\n3.375000\n12\n\n\n5\n1\n1\n3.888889\n9\n\n\n5\n1\n2\n3.500000\n16\n\n\n5\n1\n3\n4.000000\n2\n\n\n5\n1\n4\n3.666667\n3\n\n\n5\n1\n5\n2.666667\n3\n\n\n5\n2\n1\n4.086957\n23\n\n\n5\n2\n2\n3.833333\n114\n\n\n5\n2\n3\n3.941177\n17\n\n\n5\n2\n4\n3.825000\n40\n\n\n5\n2\n5\n3.500000\n4\n\n\n5\n2\n\n4.000000\n2\n\n\n5\n3\n1\n3.666667\n12\n\n\n5\n3\n2\n3.700000\n60\n\n\n5\n3\n3\n3.480000\n50\n\n\n5\n3\n4\n3.400000\n30\n\n\n5\n3\n\n3.375000\n8\n\n\n5\n4\n1\n4.133333\n15\n\n\n5\n4\n2\n3.717472\n269\n\n\n5\n4\n3\n3.778947\n95\n\n\n5\n4\n4\n3.589744\n468\n\n\n5\n4\n5\n3.500000\n54\n\n\n5\n4\n\n4.000000\n3\n\n\n5\n5\n1\n3.727273\n22\n\n\n5\n5\n2\n3.675676\n74\n\n\n5\n5\n3\n3.482759\n29\n\n\n5\n5\n4\n3.549133\n173\n\n\n5\n5\n5\n3.327869\n123\n\n\n5\n5\n\n3.750000\n4\n\n\n5\n\n1\n\n54\n\n\n5\n\n2\n4.000000\n304\n\n\n5\n\n3\n4.000000\n126\n\n\n5\n\n4\n4.000000\n399\n\n\n5\n\n5\n1.000000\n121\n\n\n5\n\n\n4.500000\n14\n\n\n6\n1\n1\n3.500000\n1\n\n\n6\n1\n2\n3.833333\n6\n\n\n6\n1\n3\n2.750000\n2\n\n\n6\n1\n5\n3.333333\n3\n\n\n6\n1\n\n3.500000\n1\n\n\n6\n2\n1\n3.535714\n14\n\n\n6\n2\n2\n3.509091\n55\n\n\n6\n2\n3\n3.700000\n5\n\n\n6\n2\n4\n3.617647\n17\n\n\n6\n2\n5\n4.500000\n2\n\n\n6\n2\n\n4.000000\n1\n\n\n6\n3\n1\n3.461539\n13\n\n\n6\n3\n2\n3.358974\n39\n\n\n6\n3\n3\n3.260870\n23\n\n\n6\n3\n4\n3.500000\n14\n\n\n6\n3\n5\n2.000000\n3\n\n\n6\n3\n\n4.000000\n3\n\n\n6\n4\n1\n3.629630\n27\n\n\n6\n4\n2\n3.354545\n275\n\n\n6\n4\n3\n3.291667\n120\n\n\n6\n4\n4\n3.284198\n424\n\n\n6\n4\n5\n3.096774\n31\n\n\n6\n4\n\n3.785714\n7\n\n\n6\n5\n1\n3.220000\n25\n\n\n6\n5\n2\n3.465278\n144\n\n\n6\n5\n3\n3.256944\n72\n\n\n6\n5\n4\n3.365462\n249\n\n\n6\n5\n5\n3.300725\n138\n\n\n6\n5\n\n2.000000\n2\n\n\n6\n\n1\n3.398438\n75\n\n\n6\n\n2\n3.375465\n337\n\n\n6\n\n3\n3.362745\n116\n\n\n6\n\n4\n3.299694\n383\n\n\n6\n\n5\n3.261628\n95\n\n\n6\n\n\n3.375000\n8\n\n\n7\n1\n1\n3.750000\n4\n\n\n7\n1\n2\n3.333333\n3\n\n\n7\n1\n3\n1.000000\n1\n\n\n7\n1\n4\n3.250000\n4\n\n\n7\n1\n5\n5.000000\n2\n\n\n7\n2\n1\n3.666667\n12\n\n\n7\n2\n2\n3.869565\n23\n\n\n7\n2\n3\n3.500000\n6\n\n\n7\n2\n4\n3.117647\n17\n\n\n7\n2\n5\n3.000000\n1\n\n\n7\n2\n\n4.000000\n1\n\n\n7\n3\n1\n4.363636\n11\n\n\n7\n3\n2\n3.928571\n42\n\n\n7\n3\n3\n3.590909\n22\n\n\n7\n3\n4\n3.533333\n30\n\n\n7\n3\n5\n4.200000\n5\n\n\n7\n3\n\n1.000000\n1\n\n\n7\n4\n1\n3.578947\n39\n\n\n7\n4\n2\n3.625000\n192\n\n\n7\n4\n3\n3.512605\n119\n\n\n7\n4\n4\n3.405797\n415\n\n\n7\n4\n5\n3.567568\n37\n\n\n7\n4\n\n3.400000\n10\n\n\n7\n5\n1\n3.812500\n32\n\n\n7\n5\n2\n3.589147\n129\n\n\n7\n5\n3\n3.544304\n79\n\n\n7\n5\n4\n3.346626\n326\n\n\n7\n5\n5\n3.266272\n170\n\n\n7\n5\n\n3.333333\n3\n\n\n7\n\n1\n3.739726\n73\n\n\n7\n\n2\n3.461017\n295\n\n\n7\n\n3\n3.477419\n155\n\n\n7\n\n4\n3.497175\n354\n\n\n7\n\n5\n3.525253\n99\n\n\n7\n\n\n3.571429\n14",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Dimensión: Seguridad pública</span>"
    ]
  },
  {
    "objectID": "migracion-rev.html#info-gráfico",
    "href": "migracion-rev.html#info-gráfico",
    "title": "1  Dimensión: Seguridad subjetiva y Variables de migración",
    "section": "2.5 Info Gráfico",
    "text": "2.5 Info Gráfico\n\n# recodificar indice seguridad subjetiva en bajo (1-2.5), medio (2.6-3.5) y alto (3.6-5)\ncheck1 &lt;- check1 %&gt;%\n  mutate(seg_sub3 = case_when(\n    seg_sub &gt;=1 & seg_sub &lt;= 3 ~ \"Bajo\",\n    seg_sub &gt; 3 & seg_sub &lt;= 5 ~ \"Alto\",\n    TRUE ~ NA_character_\n  ))  \n\nfrq(check1$seg_sub3) # ok\n\nx &lt;character&gt; \n# total N=20761 valid N=19588 mean=1.39 sd=0.49\n\nValue |     N | Raw % | Valid % | Cum. %\n----------------------------------------\nAlto  | 11956 | 57.59 |   61.04 |  61.04\nBajo  |  7632 | 36.76 |   38.96 | 100.00\n&lt;NA&gt;  |  1173 |  5.65 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n#reordenar alto, medio, bajo\ncheck1$seg_sub3 &lt;- factor(check1$seg_sub3, levels = c(\"Alto\", \"Bajo\"))\nfrq(check1$seg_sub3) # ok\n\nx &lt;categorical&gt; \n# total N=20761 valid N=19588 mean=1.39 sd=0.49\n\nValue |     N | Raw % | Valid % | Cum. %\n----------------------------------------\nAlto  | 11956 | 57.59 |   61.04 |  61.04\nBajo  |  7632 | 36.76 |   38.96 | 100.00\n&lt;NA&gt;  |  1173 |  5.65 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n# recodificar r12_04 (desempleo migrantes) en muy de acuerdo = 1, el resto=0, sacando los NAs\ncheck1 &lt;- check1 %&gt;%\n  mutate(desempleo_migrantes5 = case_when(\n    r12_04 == 5 ~ \"Muy de acuerdo\",\n    r12_04 %in% c(1, 2, 3, 4) ~ \"Otro\",\n    TRUE ~ NA_character_\n  ))\nfrq(check1$desempleo_migrantes5) # ok\n\nx &lt;character&gt; \n# total N=20761 valid N=20456 mean=1.88 sd=0.32\n\nValue          |     N | Raw % | Valid % | Cum. %\n-------------------------------------------------\nMuy de acuerdo |  2418 | 11.65 |   11.82 |  11.82\nOtro           | 18038 | 86.88 |   88.18 | 100.00\n&lt;NA&gt;           |   305 |  1.47 |    &lt;NA&gt; |   &lt;NA&gt;\n\n# recodificar r12_04 (desempleo migrantes) en muy en desacuerdo = 1, el resto=0, sacando los NAs\ncheck1 &lt;- check1 %&gt;%\n  mutate(desempleo_migrantes1 = case_when(\n    r12_04 == 1 ~ \"Muy en desacuerdo\",\n    r12_04 %in% c(2, 3, 4, 5) ~ \"Otro\",\n    TRUE ~ NA_character_\n  ))\nfrq(check1$desempleo_migrantes1) # ok\n\nx &lt;character&gt; \n# total N=20761 valid N=20456 mean=1.94 sd=0.25\n\nValue             |     N | Raw % | Valid % | Cum. %\n----------------------------------------------------\nMuy en desacuerdo |  1325 |  6.38 |    6.48 |   6.48\nOtro              | 19131 | 92.15 |   93.52 | 100.00\n&lt;NA&gt;              |   305 |  1.47 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n# recodificar c37_05 (restriccion migrantes) en muy de acuerdo = 1, el resto=0, sacando los NAs\ncheck1 &lt;- check1 %&gt;%\n  mutate(restriccion_migrantes5 = case_when(\n    c37_05 == 5 ~ \"Muy de acuerdo\",\n    c37_05 %in% c(1, 2, 3, 4) ~ \"Otro\",\n    TRUE ~ NA_character_\n  ))\nfrq(check1$restriccion_migrantes5) # ok\n\nx &lt;character&gt; \n# total N=20761 valid N=9532 mean=1.70 sd=0.46\n\nValue          |     N | Raw % | Valid % | Cum. %\n-------------------------------------------------\nMuy de acuerdo |  2825 | 13.61 |   29.64 |  29.64\nOtro           |  6707 | 32.31 |   70.36 | 100.00\n&lt;NA&gt;           | 11229 | 54.09 |    &lt;NA&gt; |   &lt;NA&gt;\n\n# recodificar c37_05 (restriccion migrantes) en muy en desacuerdo = 1, el resto=0, sacando los NAs\ncheck1 &lt;- check1 %&gt;%\n  mutate(restriccion_migrantes1 = case_when(\n    c37_05 == 1 ~ \"Muy en desacuerdo\",\n    c37_05 %in% c(2, 3, 4, 5) ~ \"Otro\",\n    TRUE ~ NA_character_\n  ))\nfrq(check1$restriccion_migrantes1) # ok\n\nx &lt;character&gt; \n# total N=20761 valid N=9532 mean=1.97 sd=0.16\n\nValue             |     N | Raw % | Valid % | Cum. %\n----------------------------------------------------\nMuy en desacuerdo |   239 |  1.15 |    2.51 |   2.51\nOtro              |  9293 | 44.76 |   97.49 | 100.00\n&lt;NA&gt;              | 11229 | 54.09 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n#Recodificar seguridad subjetiva en baja y alta\ncheck1 &lt;- check1 %&gt;%\n  mutate(seg_sub2 = case_when(\n    seg_sub &gt;= 1 & seg_sub &lt;= 3 ~ \"Baja\",\n    seg_sub &gt; 3 & seg_sub &lt;= 5 ~ \"Alta\",\n    TRUE ~ NA_character_\n  ))  \ncheck1$seg_sub2 &lt;- factor(check1$seg_sub2, levels = c(\"Alta\", \"Baja\"))\nfrq(check1$seg_sub2)\n\nx &lt;categorical&gt; \n# total N=20761 valid N=19588 mean=1.39 sd=0.49\n\nValue |     N | Raw % | Valid % | Cum. %\n----------------------------------------\nAlta  | 11956 | 57.59 |   61.04 |  61.04\nBaja  |  7632 | 36.76 |   38.96 | 100.00\n&lt;NA&gt;  |  1173 |  5.65 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\nTabla cruzada entre Seguridad Subjetiva y Restricción de Migrantes para observar los porcentajes y su distribución por ola\n\ntabla_cruzada &lt;- check1 %&gt;%\n  filter(!is.na(seg_sub3) & !is.na(restriccion_migrantes5) & restriccion_migrantes5 == \"Muy de acuerdo\") %&gt;%\n  group_by(ola, seg_sub3) %&gt;%\n  summarise(n = n()) %&gt;%  \n  group_by(ola) %&gt;%\n  mutate(total_ola = sum(n),\n         porcentaje = (n / total_ola) * 100) %&gt;%\n  ungroup()\n\nknitr::kable(tabla_cruzada, format = table_format, caption = \"Tabla cruzada de seguridad subjetiva y restricción migrantes (Muy de acuerdo) por ola - porcentaje dentro de ola\")\n\n\nTabla cruzada de seguridad subjetiva y restricción migrantes (Muy de acuerdo) por ola - porcentaje dentro de ola\n\n\nola\nseg_sub3\nn\ntotal_ola\nporcentaje\n\n\n\n\n3\nAlto\n335\n580\n57.75862\n\n\n3\nBajo\n245\n580\n42.24138\n\n\n4\nAlto\n290\n451\n64.30155\n\n\n4\nBajo\n161\n451\n35.69845\n\n\n5\nAlto\n259\n424\n61.08491\n\n\n5\nBajo\n165\n424\n38.91509\n\n\n6\nAlto\n375\n630\n59.52381\n\n\n6\nBajo\n255\n630\n40.47619\n\n\n7\nAlto\n429\n738\n58.13008\n\n\n7\nBajo\n309\n738\n41.86992\n\n\n\n\n\n\ntabla_cruzada &lt;- check1 %&gt;%\n  filter(!is.na(seg_sub3) & !is.na(restriccion_migrantes1) & restriccion_migrantes1 == \"Muy en desacuerdo\") %&gt;%\n  group_by(ola, seg_sub3) %&gt;%\n  summarise(n = n()) %&gt;%  \n  group_by(ola) %&gt;%\n  mutate(total_ola = sum(n),\n         porcentaje = (n / total_ola) * 100) %&gt;%\n  ungroup()\n\nknitr::kable(tabla_cruzada, format = table_format, caption = \"Tabla cruzada de seguridad subjetiva y restricción migrantes (Muy en desacuerdo) por ola - porcentaje dentro de ola\")\n\n\nTabla cruzada de seguridad subjetiva y restricción migrantes (Muy en desacuerdo) por ola - porcentaje dentro de ola\n\n\nola\nseg_sub3\nn\ntotal_ola\nporcentaje\n\n\n\n\n3\nAlto\n61\n94\n64.89362\n\n\n3\nBajo\n33\n94\n35.10638\n\n\n4\nAlto\n56\n85\n65.88235\n\n\n4\nBajo\n29\n85\n34.11765\n\n\n5\nAlto\n20\n33\n60.60606\n\n\n5\nBajo\n13\n33\n39.39394\n\n\n6\nAlto\n10\n13\n76.92308\n\n\n6\nBajo\n3\n13\n23.07692\n\n\n7\nAlto\n9\n14\n64.28571\n\n\n7\nBajo\n5\n14\n35.71429",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Dimensión: Seguridad subjetiva y Variables de migración</span>"
    ]
  },
  {
    "objectID": "migracion-rev.html#seguridad-subjetiva-y-desempleo-migrantes",
    "href": "migracion-rev.html#seguridad-subjetiva-y-desempleo-migrantes",
    "title": "1  Dimensión: Seguridad subjetiva y Variables de migración",
    "section": "2.6 Seguridad Subjetiva y Desempleo migrantes",
    "text": "2.6 Seguridad Subjetiva y Desempleo migrantes\n\n# Recodificar algo de acuerdo = 4 y muy de acuerdo = 5 como \"De acuerdo\", 3= \"ni de acuerdo ni desacuerdo\", y 1 y 2 como \"en desacuerdo, sacando los NAs\n\nelsoc_long &lt;- elsoc_long %&gt;%\n  mutate(desempleo_migrantes = case_when(\n    r12_04 %in% c(1, 2) ~ \"Totalmente en desacuerdo + desacuerdo\",\n    r12_04 == 3 ~ \"Ni de acuerdo ni en desacuerdo\",\n    r12_04 %in% c(4, 5) ~ \"Totalmente de acuerdo + de acuerdo\",\n    TRUE ~ NA_character_\n  ))\n\n# order from  \"En desacuerdo\", \"Ni de acuerdo ni en desacuerdo\", \"De acuerdo\"\nelsoc_long$desempleo_migrantes &lt;- factor(elsoc_long$desempleo_migrantes, levels = c(\"Totalmente en desacuerdo + desacuerdo\", \"Ni de acuerdo ni en desacuerdo\", \"Totalmente de acuerdo + de acuerdo\")) \n\nfrq(elsoc_long$desempleo_migrantes) # ok\n\nx &lt;categorical&gt; \n# total N=20761 valid N=20456 mean=2.18 sd=0.92\n\nValue                                 |     N | Raw % | Valid % | Cum. %\n------------------------------------------------------------------------\nTotalmente en desacuerdo + desacuerdo |  7106 | 34.23 |   34.74 |  34.74\nNi de acuerdo ni en desacuerdo        |  2594 | 12.49 |   12.68 |  47.42\nTotalmente de acuerdo + de acuerdo    | 10756 | 51.81 |   52.58 | 100.00\n&lt;NA&gt;                                  |   305 |  1.47 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n# generar indice promedio de seguridad subjetiva con t06_01 y t10\nelsoc_long &lt;- elsoc_long %&gt;% \n  mutate(seg_sub = rowMeans(select(., t06_01, t10), na.rm = TRUE))  \n\nfrq(elsoc_long$seg_sub) # ok\n\nx &lt;numeric&gt; \n# total N=20761 valid N=19588 mean=3.42 sd=0.97\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n 1.00 |  500 |  2.41 |    2.55 |   2.55\n 1.50 |  622 |  3.00 |    3.18 |   5.73\n 2.00 | 2060 |  9.92 |   10.52 |  16.24\n 2.50 | 1387 |  6.68 |    7.08 |  23.33\n 3.00 | 3063 | 14.75 |   15.64 |  38.96\n 3.50 | 1959 |  9.44 |   10.00 |  48.96\n 4.00 | 7309 | 35.21 |   37.31 |  86.28\n 4.50 | 1473 |  7.10 |    7.52 |  93.80\n 5.00 | 1215 |  5.85 |    6.20 | 100.00\n &lt;NA&gt; | 1173 |  5.65 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\ncheck2 &lt;- elsoc_long %&gt;%\n  select(ola, seg_sub, desempleo_migrantes, segmento, estrato, ponderador_long_total)\n\n# cheq\nfrq(check2$desempleo_migrantes) # ok\n\nx &lt;categorical&gt; \n# total N=20761 valid N=20456 mean=2.18 sd=0.92\n\nValue                                 |     N | Raw % | Valid % | Cum. %\n------------------------------------------------------------------------\nTotalmente en desacuerdo + desacuerdo |  7106 | 34.23 |   34.74 |  34.74\nNi de acuerdo ni en desacuerdo        |  2594 | 12.49 |   12.68 |  47.42\nTotalmente de acuerdo + de acuerdo    | 10756 | 51.81 |   52.58 | 100.00\n&lt;NA&gt;                                  |   305 |  1.47 |    &lt;NA&gt; |   &lt;NA&gt;",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Dimensión: Seguridad subjetiva y Variables de migración</span>"
    ]
  },
  {
    "objectID": "migracion-rev.html#gráficos",
    "href": "migracion-rev.html#gráficos",
    "title": "1  Dimensión: Seguridad subjetiva y Variables de migración",
    "section": "2.7 Gráficos",
    "text": "2.7 Gráficos\n\n\n\n\n\n\n\n\nFigure 2.1",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Dimensión: Seguridad subjetiva y Variables de migración</span>"
    ]
  },
  {
    "objectID": "migracion-rev.html#seguridad-subjetiva-y-restricción-migrantes-longitudinal",
    "href": "migracion-rev.html#seguridad-subjetiva-y-restricción-migrantes-longitudinal",
    "title": "1  Dimensión: Seguridad subjetiva y Variables de migración",
    "section": "2.8 Seguridad Subjetiva y Restricción Migrantes (Longitudinal)",
    "text": "2.8 Seguridad Subjetiva y Restricción Migrantes (Longitudinal)\n\n# Recodificar algo de acuerdo = 4 y muy de acuerdo = 5 como \"De acuerdo\", 3= \"ni de acuerdo ni desacuerdo\", y 1 y 2 como \"en desacuerdo, sacando los NAs\n\nelsoc_long &lt;- elsoc_long %&gt;%\n  mutate(restriccion_migrantes = case_when(\n    c37_05 %in% c(1, 2) ~ \"Totalmente en desacuerdo + desacuerdo\",\n    c37_05 == 3 ~ \"Ni de acuerdo ni en desacuerdo\",\n    c37_05 %in% c(4, 5) ~ \"Totalmente de acuerdo + de acuerdo\",\n    TRUE ~ NA_character_\n  ))\n\n# order from  \"En desacuerdo\", \"Ni de acuerdo ni en desacuerdo\", \"De acuerdo\"\nelsoc_long$restriccion_migrantes &lt;- factor(elsoc_long$restriccion_migrantes, levels = c(\"Totalmente en desacuerdo + desacuerdo\", \"Ni de acuerdo ni en desacuerdo\", \"Totalmente de acuerdo + de acuerdo\")) \n\nfrq(elsoc_long$restriccion_migrantes) # ok\n\nx &lt;categorical&gt; \n# total N=20761 valid N=9532 mean=2.65 sd=0.69\n\nValue                                 |     N | Raw % | Valid % | Cum. %\n------------------------------------------------------------------------\nTotalmente en desacuerdo + desacuerdo |  1184 |  5.70 |   12.42 |  12.42\nNi de acuerdo ni en desacuerdo        |  1004 |  4.84 |   10.53 |  22.95\nTotalmente de acuerdo + de acuerdo    |  7344 | 35.37 |   77.05 | 100.00\n&lt;NA&gt;                                  | 11229 | 54.09 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n# generar indice promedio de seguridad subjetiva con t06_01 y t10\nelsoc_long &lt;- elsoc_long %&gt;% \n  mutate(seg_sub = rowMeans(select(., t06_01, t10), na.rm = TRUE))\n\nfrq(elsoc_long$seg_sub) # ok\n\nx &lt;numeric&gt; \n# total N=20761 valid N=19588 mean=3.42 sd=0.97\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n 1.00 |  500 |  2.41 |    2.55 |   2.55\n 1.50 |  622 |  3.00 |    3.18 |   5.73\n 2.00 | 2060 |  9.92 |   10.52 |  16.24\n 2.50 | 1387 |  6.68 |    7.08 |  23.33\n 3.00 | 3063 | 14.75 |   15.64 |  38.96\n 3.50 | 1959 |  9.44 |   10.00 |  48.96\n 4.00 | 7309 | 35.21 |   37.31 |  86.28\n 4.50 | 1473 |  7.10 |    7.52 |  93.80\n 5.00 | 1215 |  5.85 |    6.20 | 100.00\n &lt;NA&gt; | 1173 |  5.65 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\ncheck3 &lt;- elsoc_long %&gt;%\n  select(ola, seg_sub, restriccion_migrantes, segmento, estrato, ponderador_long_total)\n\n# cheq\nfrq(check3$restriccion_migrantes) # ok\n\nx &lt;categorical&gt; \n# total N=20761 valid N=9532 mean=2.65 sd=0.69\n\nValue                                 |     N | Raw % | Valid % | Cum. %\n------------------------------------------------------------------------\nTotalmente en desacuerdo + desacuerdo |  1184 |  5.70 |   12.42 |  12.42\nNi de acuerdo ni en desacuerdo        |  1004 |  4.84 |   10.53 |  22.95\nTotalmente de acuerdo + de acuerdo    |  7344 | 35.37 |   77.05 | 100.00\n&lt;NA&gt;                                  | 11229 | 54.09 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n#recodificar seguridad subjetiva en baja y alta\ncheck3 &lt;- check3 %&gt;%\n  mutate(seg_sub2 = case_when(\n    seg_sub &gt;= 1 & seg_sub &lt;= 3 ~ \"Baja\",\n    seg_sub &gt; 3 & seg_sub &lt;= 5 ~ \"Alta\",\n    TRUE ~ NA_character_\n  ))  \ncheck3$seg_sub2 &lt;- factor(check3$seg_sub2, levels = c(\"Alta\", \"Baja\"))\nfrq(check3$seg_sub2)\n\nx &lt;categorical&gt; \n# total N=20761 valid N=19588 mean=1.39 sd=0.49\n\nValue |     N | Raw % | Valid % | Cum. %\n----------------------------------------\nAlta  | 11956 | 57.59 |   61.04 |  61.04\nBaja  |  7632 | 36.76 |   38.96 | 100.00\n&lt;NA&gt;  |  1173 |  5.65 |    &lt;NA&gt; |   &lt;NA&gt;",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Dimensión: Seguridad subjetiva y Variables de migración</span>"
    ]
  },
  {
    "objectID": "migracion-rev.html#gráfico",
    "href": "migracion-rev.html#gráfico",
    "title": "1  Dimensión: Seguridad pública",
    "section": "2.8 Gráfico",
    "text": "2.8 Gráfico\n\ncheck3 &lt;- check3 %&gt;% #Se pondera la base\n  as_survey_design(ids = segmento, \n                   strata = estrato, \n                   weights = ponderador_long_total,\n                   nest = T)\ncheck3 %&gt;%\n  select(ola, seg_sub, restriccion_migrantes) %&gt;%\n    filter(restriccion_migrantes == \"Totalmente en desacuerdo + desacuerdo\") %&gt;%\n  mutate(\n    seg_sub = case_when(\n      seg_sub &lt;= 3 ~ \"Baja seguridad\",\n      seg_sub &gt; 3 ~ \"Alta seguridad\"\n    ),\n    seg_sub = factor(\n      seg_sub,\n      levels = c(\"Baja seguridad\", \"Alta seguridad\")),\n    ola = case_when(ola == 1 ~ \"2016\",\n                          ola == 2 ~ \"2017\",\n                          ola == 3 ~ \"2018\",\n                          ola == 4 ~ \"2019\",\n                          ola == 5 ~ \"2021\",\n                          ola == 6 ~ \"2022\",\n                          ola == 7 ~ \"2023\"),\n         ola = factor(ola, levels = c(\"2016\",\n                                        \"2017\",\n                                        \"2018\",\n                                        \"2019\",\n                                      \"2021\",\n                                        \"2022\",\n                                        \"2023\"))\n  ) %&gt;%\n  tidyr::drop_na() %&gt;%\n  group_by(ola, seg_sub) %&gt;%\n  survey_count(vartype = NULL) %&gt;%\n  ungroup() %&gt;%\n  group_by(ola) %&gt;%\n  mutate(\n    prop  = 100 * n / sum(n),                 \n    label = scales::percent(prop/100, accuracy = 0.1),\n    grupo = \"Totalmente en desacuerdo + desacuerdo con restricción acceso migrantes\"   # 👈 variable para la leyenda\n  ) %&gt;%\n  ggplot(aes(x = ola, y = prop, group = seg_sub)) +\n  geom_point(aes(color = grupo), size = 3) +   # 👈 color mapeado\n  geom_line(aes(color = grupo), linewidth = 1) +\n  facet_wrap(~seg_sub) +\n  geom_text(\n    aes(label = label),\n    color = \"#522A6F\",   # aquí sí puede quedar fijo, no es necesario en la leyenda\n    vjust = -1, size = 4, show.legend = FALSE\n  ) +\n  scale_color_manual(\n    name = NULL,   # 👈 título de la leyenda (puedes dejarlo NULL o poner texto)\n    values = c(\"Totalmente en desacuerdo + desacuerdo con restricción acceso migrantes\" = \"#522A6F\")\n  ) +\n  scale_y_continuous(\n    labels = function(p){paste0(p, \"%\")},\n    limits = c(0,100),\n    breaks = seq(0,100, by = 25),\n    expand = expansion(mult = c(0.02, 0.08))\n  ) +\n  labs(\n    subtitle = \"Porcentaje que responde...\",\n    x = NULL,\n    y = NULL,\n    caption = \"Fuente: Elaboración propia con datos agrupados de ELSOC 2018-2023\"\n  ) +\n  theme_bw() +\n  theme(\n    plot.title   = element_text(size = 24, face = \"bold\", hjust = 0),\n    plot.subtitle = element_text(size = 16, hjust = 0),\n    plot.caption = element_text(size = 14),\n    \n    axis.title.x = element_text(size = 18),\n    axis.title.y = element_text(size = 18),\n    axis.text.x  = element_text(size = 16),\n    axis.text.y  = element_text(size = 16),\n    \n    legend.title = element_text(size = 16, face = \"bold\"),\n    legend.text  = element_text(size = 14),\n    legend.box.background = element_rect(color = \"grey20\", fill = \"white\", linewidth = 0.5),\n    legend.background     = element_rect(fill = \"white\", color = NA),\n    legend.margin         = margin(t = 6, r = 8, b = 6, l = 8),\n    legend.box.margin     = margin(t = 6, r = 6, b = 6, l = 6),\n    \n    legend.position  = \"top\",\n    legend.direction = \"horizontal\",\n    strip.text = element_text(size = 18, face = \"bold\", hjust = 0.5)\n  )\n\n\n\n\n\n\n\nFigure 2.2",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Dimensión: Seguridad pública</span>"
    ]
  },
  {
    "objectID": "vinculos-territoriales-rev.html",
    "href": "vinculos-territoriales-rev.html",
    "title": "2  Dimensión: Vínculos territoriales y Variables de migración",
    "section": "",
    "text": "2.1 Pasos previos\nlibrary(knitr)\nknitr::opts_chunk$set(echo = TRUE, \n                      include = TRUE, \n                      warning = FALSE, \n                      message = FALSE)\n\ntable_format &lt;- if(is_html_output()) {\n  \"html\"\n} else if(is_latex_output()) {\n  \"latex\"\n}\ntable_format2 &lt;- if(is_html_output()) {\n  T\n} else if(is_latex_output()) {\n  F\n}\n\noptions(kableExtra.html.bsTable = T)\noptions(knitr.kable.NA = \"\")\nif (! require(\"pacman\")) install.packages(\"pacman\")\n\npacman::p_load(tidyverse,\n               sjmisc, \n               here,\n               sjlabelled,\n               sjPlot,\n               srvyr,\n               ggdist,\n               purrr,\n               rlang,\n               ggdist)\n\noptions(scipen=999)\nrm(list = ls())\ndb_long &lt;- here(\"input/data/raw_data/elsoc.RData\")\nload(db_long)\n\nelsoc &lt;- elsoc_long_2016_2023\nCreamos la base con las variables que conforman los índices satisfacción en el barrio, sentido de pertenencia y las variables de migración. Luego, recodificamos los NA.\nelsoc_7 &lt;- elsoc %&gt;%\n  select(idencuesta, ola, cuestion_mig, ponderador_long_total, segmento, estrato, t02_01, t02_02, t02_03, t02_04, t03_01, t03_02, t03_03, t03_04, r12_03, c37_05, r07)\n\nmissing_codes &lt;- c(-999, -888, -777, -666)\nelsoc_7 &lt;- elsoc_7 %&gt;%\n  mutate(across(everything(), ~ sjlabelled::set_na(.x, na = missing_codes)))\n\n# check\n\nfrq(elsoc_7$c37_05)\n\nGrado de acuerdo: restricciones ingreso migrantes (x) &lt;numeric&gt; \n# total N=20761 valid N=9532 mean=3.92 sd=1.01\n\nValue |                          Label |     N | Raw % | Valid % | Cum. %\n-------------------------------------------------------------------------\n    1 |       Totalmente en desacuerdo |   239 |  1.15 |    2.51 |   2.51\n    2 |                  En desacuerdo |   945 |  4.55 |    9.91 |  12.42\n    3 | Ni de acuerdo ni en desacuerdo |  1004 |  4.84 |   10.53 |  22.95\n    4 |                     De acuerdo |  4519 | 21.77 |   47.41 |  70.36\n    5 |          Totalmente de acuerdo |  2825 | 13.61 |   29.64 | 100.00\n &lt;NA&gt; |                           &lt;NA&gt; | 11229 | 54.09 |    &lt;NA&gt; |   &lt;NA&gt;\n\nfrq(elsoc_7$t02_01)\n\nGrado de acuerdo: Este es el barrio ideal para mi (x) &lt;numeric&gt; \n# total N=20761 valid N=17847 mean=3.69 sd=1.02\n\nValue |                          Label |    N | Raw % | Valid % | Cum. %\n------------------------------------------------------------------------\n    1 |       Totalmente en desacuerdo |  643 |  3.10 |    3.60 |   3.60\n    2 |                  En desacuerdo | 2306 | 11.11 |   12.92 |  16.52\n    3 | Ni de acuerdo ni en desacuerdo | 2135 | 10.28 |   11.96 |  28.49\n    4 |                     De acuerdo | 9671 | 46.58 |   54.19 |  82.67\n    5 |          Totalmente de acuerdo | 3092 | 14.89 |   17.33 | 100.00\n &lt;NA&gt; |                           &lt;NA&gt; | 2914 | 14.04 |    &lt;NA&gt; |   &lt;NA&gt;",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Dimensión: Vínculos territoriales y Variables de migración</span>"
    ]
  },
  {
    "objectID": "vinculos-territoriales-rev.html#univariados",
    "href": "vinculos-territoriales-rev.html#univariados",
    "title": "2  Dimensión: Vínculos territoriales y Variables de migración",
    "section": "2.2 Univariados",
    "text": "2.2 Univariados\n\n2.2.1 Vínculos territoriales\n\nfrq(elsoc_7$t02_01)\n\nGrado de acuerdo: Este es el barrio ideal para mi (x) &lt;numeric&gt; \n# total N=20761 valid N=17847 mean=3.69 sd=1.02\n\nValue |                          Label |    N | Raw % | Valid % | Cum. %\n------------------------------------------------------------------------\n    1 |       Totalmente en desacuerdo |  643 |  3.10 |    3.60 |   3.60\n    2 |                  En desacuerdo | 2306 | 11.11 |   12.92 |  16.52\n    3 | Ni de acuerdo ni en desacuerdo | 2135 | 10.28 |   11.96 |  28.49\n    4 |                     De acuerdo | 9671 | 46.58 |   54.19 |  82.67\n    5 |          Totalmente de acuerdo | 3092 | 14.89 |   17.33 | 100.00\n &lt;NA&gt; |                           &lt;NA&gt; | 2914 | 14.04 |    &lt;NA&gt; |   &lt;NA&gt;\n\nfrq(elsoc_7$t02_02)\n\nGrado de acuerdo: Me siento integrado/a en este barrio (x) &lt;numeric&gt; \n# total N=20761 valid N=17845 mean=3.69 sd=0.98\n\nValue |                          Label |     N | Raw % | Valid % | Cum. %\n-------------------------------------------------------------------------\n    1 |       Totalmente en desacuerdo |   567 |  2.73 |    3.18 |   3.18\n    2 |                  En desacuerdo |  2168 | 10.44 |   12.15 |  15.33\n    3 | Ni de acuerdo ni en desacuerdo |  2254 | 10.86 |   12.63 |  27.96\n    4 |                     De acuerdo | 10011 | 48.22 |   56.10 |  84.06\n    5 |          Totalmente de acuerdo |  2845 | 13.70 |   15.94 | 100.00\n &lt;NA&gt; |                           &lt;NA&gt; |  2916 | 14.05 |    &lt;NA&gt; |   &lt;NA&gt;\n\nfrq(elsoc_7$t02_03)\n\nGrado de acuerdo: Me identifico con la gente de este barrio (x) &lt;numeric&gt; \n# total N=20761 valid N=17837 mean=3.60 sd=1.01\n\nValue |                          Label |    N | Raw % | Valid % | Cum. %\n------------------------------------------------------------------------\n    1 |       Totalmente en desacuerdo |  621 |  2.99 |    3.48 |   3.48\n    2 |                  En desacuerdo | 2573 | 12.39 |   14.43 |  17.91\n    3 | Ni de acuerdo ni en desacuerdo | 2763 | 13.31 |   15.49 |  33.40\n    4 |                     De acuerdo | 9312 | 44.85 |   52.21 |  85.60\n    5 |          Totalmente de acuerdo | 2568 | 12.37 |   14.40 | 100.00\n &lt;NA&gt; |                           &lt;NA&gt; | 2924 | 14.08 |    &lt;NA&gt; |   &lt;NA&gt;\n\nfrq(elsoc_7$t02_04)\n\nGrado de acuerdo: Este barrio es parte de mi (x) &lt;numeric&gt; \n# total N=20761 valid N=17844 mean=3.69 sd=1.00\n\nValue |                          Label |    N | Raw % | Valid % | Cum. %\n------------------------------------------------------------------------\n    1 |       Totalmente en desacuerdo |  589 |  2.84 |    3.30 |   3.30\n    2 |                  En desacuerdo | 2274 | 10.95 |   12.74 |  16.04\n    3 | Ni de acuerdo ni en desacuerdo | 2217 | 10.68 |   12.42 |  28.47\n    4 |                     De acuerdo | 9773 | 47.07 |   54.77 |  83.24\n    5 |          Totalmente de acuerdo | 2991 | 14.41 |   16.76 | 100.00\n &lt;NA&gt; |                           &lt;NA&gt; | 2917 | 14.05 |    &lt;NA&gt; |   &lt;NA&gt;\n\nfrq(elsoc_7$t03_01)\n\nGrado de acuerdo: En este barrio es facil hacer amigos (x) &lt;numeric&gt; \n# total N=20761 valid N=17774 mean=3.37 sd=1.03\n\nValue |                          Label |    N | Raw % | Valid % | Cum. %\n------------------------------------------------------------------------\n    1 |       Totalmente en desacuerdo |  677 |  3.26 |    3.81 |   3.81\n    2 |                  En desacuerdo | 3653 | 17.60 |   20.55 |  24.36\n    3 | Ni de acuerdo ni en desacuerdo | 3609 | 17.38 |   20.30 |  44.67\n    4 |                     De acuerdo | 8135 | 39.18 |   45.77 |  90.44\n    5 |          Totalmente de acuerdo | 1700 |  8.19 |    9.56 | 100.00\n &lt;NA&gt; |                           &lt;NA&gt; | 2987 | 14.39 |    &lt;NA&gt; |   &lt;NA&gt;\n\nfrq(elsoc_7$t03_02)\n\nGrado de acuerdo: La gente en este barrio es sociable (x) &lt;numeric&gt; \n# total N=20761 valid N=17814 mean=3.58 sd=0.93\n\nValue |                          Label |    N | Raw % | Valid % | Cum. %\n------------------------------------------------------------------------\n    1 |       Totalmente en desacuerdo |  411 |  1.98 |    2.31 |   2.31\n    2 |                  En desacuerdo | 2441 | 11.76 |   13.70 |  16.01\n    3 | Ni de acuerdo ni en desacuerdo | 3291 | 15.85 |   18.47 |  34.48\n    4 |                     De acuerdo | 9750 | 46.96 |   54.73 |  89.22\n    5 |          Totalmente de acuerdo | 1921 |  9.25 |   10.78 | 100.00\n &lt;NA&gt; |                           &lt;NA&gt; | 2947 | 14.19 |    &lt;NA&gt; |   &lt;NA&gt;\n\nfrq(elsoc_7$t03_03)\n\nGrado de acuerdo: La gente en este barrio es cordial (x) &lt;numeric&gt; \n# total N=20761 valid N=17820 mean=3.67 sd=0.88\n\nValue |                          Label |     N | Raw % | Valid % | Cum. %\n-------------------------------------------------------------------------\n    1 |       Totalmente en desacuerdo |   336 |  1.62 |    1.89 |   1.89\n    2 |                  En desacuerdo |  1889 |  9.10 |   10.60 |  12.49\n    3 | Ni de acuerdo ni en desacuerdo |  3030 | 14.59 |   17.00 |  29.49\n    4 |                     De acuerdo | 10545 | 50.79 |   59.18 |  88.66\n    5 |          Totalmente de acuerdo |  2020 |  9.73 |   11.34 | 100.00\n &lt;NA&gt; |                           &lt;NA&gt; |  2941 | 14.17 |    &lt;NA&gt; |   &lt;NA&gt;\n\nfrq(elsoc_7$t03_04)\n\nGrado de acuerdo: La gente en este barrio es colaboradora (x) &lt;numeric&gt; \n# total N=20761 valid N=17636 mean=3.56 sd=0.96\n\nValue |                          Label |    N | Raw % | Valid % | Cum. %\n------------------------------------------------------------------------\n    1 |       Totalmente en desacuerdo |  467 |  2.25 |    2.65 |   2.65\n    2 |                  En desacuerdo | 2498 | 12.03 |   14.16 |  16.81\n    3 | Ni de acuerdo ni en desacuerdo | 3541 | 17.06 |   20.08 |  36.89\n    4 |                     De acuerdo | 9000 | 43.35 |   51.03 |  87.92\n    5 |          Totalmente de acuerdo | 2130 | 10.26 |   12.08 | 100.00\n &lt;NA&gt; |                           &lt;NA&gt; | 3125 | 15.05 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\nEn todos los indicadores de la subdimensión de vínculos territoriales se observa una concentración de aproximadamente del 50% en la categoría “de acuerdo”.\nAhora, pasamos a crear los índices que conforman la subdimensión\n\nelsoc_7 &lt;- elsoc_7 %&gt;%\n mutate(\n   # Índice promediado\n   sentido_pertenencia = rowMeans(\n     select(., t02_01, t02_02, t02_03, t02_04),\n     na.rm = TRUE\n   ))\n\nslice(elsoc_7,1:10) %&gt;% select(t02_01, t02_02, t02_03, t02_04, sentido_pertenencia)\n\n   t02_01 t02_02 t02_03 t02_04 sentido_pertenencia\n1       2      3      3      3                2.75\n2       2      4      1      3                2.50\n3       2      1      2      2                1.75\n4       2      3      4      4                3.25\n5       1      2      1      1                1.25\n6       3      2      3      4                3.00\n7       4      3      3      3                3.25\n8       4      4      3      3                3.50\n9       3      3      5      5                4.00\n10      3      2      3      4                3.00\n\nfrq(elsoc_7$sentido_pertenencia)\n\nx &lt;numeric&gt; \n# total N=20761 valid N=17858 mean=3.67 sd=0.88\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n 1.00 |  265 |  1.28 |    1.48 |   1.48\n 1.25 |   67 |  0.32 |    0.38 |   1.86\n 1.50 |  104 |  0.50 |    0.58 |   2.44\n 1.75 |  171 |  0.82 |    0.96 |   3.40\n 2.00 |  913 |  4.40 |    5.11 |   8.51\n 2.25 |  415 |  2.00 |    2.32 |  10.84\n 2.33 |    1 |  0.00 |    0.01 |  10.84\n 2.50 |  629 |  3.03 |    3.52 |  14.36\n 2.67 |    3 |  0.01 |    0.02 |  14.38\n 2.75 |  531 |  2.56 |    2.97 |  17.35\n 3.00 |  992 |  4.78 |    5.55 |  22.91\n 3.25 |  914 |  4.40 |    5.12 |  28.03\n 3.33 |    4 |  0.02 |    0.02 |  28.05\n 3.50 | 1406 |  6.77 |    7.87 |  35.92\n 3.67 |    4 |  0.02 |    0.02 |  35.94\n 3.75 | 1474 |  7.10 |    8.25 |  44.20\n 4.00 | 6245 | 30.08 |   34.97 |  79.17\n 4.25 |  932 |  4.49 |    5.22 |  84.39\n 4.33 |    5 |  0.02 |    0.03 |  84.42\n 4.50 |  597 |  2.88 |    3.34 |  87.76\n 4.67 |    1 |  0.00 |    0.01 |  87.76\n 4.75 |  494 |  2.38 |    2.77 |  90.53\n 5.00 | 1691 |  8.15 |    9.47 | 100.00\n &lt;NA&gt; | 2903 | 13.98 |    &lt;NA&gt; |   &lt;NA&gt;\n\nelsoc_7$sentido_pertenencia &lt;- (round(elsoc_7$sentido_pertenencia * 2) / 2)\nfrq(elsoc_7$sentido_pertenencia)\n\nx &lt;numeric&gt; \n# total N=20761 valid N=17858 mean=3.67 sd=0.89\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n 1.00 |  332 |  1.60 |    1.86 |   1.86\n 1.50 |  104 |  0.50 |    0.58 |   2.44\n 2.00 | 1499 |  7.22 |    8.39 |  10.84\n 2.50 |  633 |  3.05 |    3.54 |  14.38\n 3.00 | 2437 | 11.74 |   13.65 |  28.03\n 3.50 | 1414 |  6.81 |    7.92 |  35.94\n 4.00 | 8651 | 41.67 |   48.44 |  84.39\n 4.50 |  603 |  2.90 |    3.38 |  87.76\n 5.00 | 2185 | 10.52 |   12.24 | 100.00\n &lt;NA&gt; | 2903 | 13.98 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\nEn el punto 3.5 se alojan el %35.92 de las observaciones.\n\nelsoc_7 &lt;- elsoc_7 %&gt;%\n mutate(\n   # Índice promediado\n   satisfaccion_barrio = rowMeans(\n     select(., t03_01, t03_02, t03_03, t03_04),\n     na.rm = TRUE\n   ))\n\nslice(elsoc_7,1:10) %&gt;% select(t03_01, t03_02, t03_03, t03_04, satisfaccion_barrio)\n\n   t03_01 t03_02 t03_03 t03_04 satisfaccion_barrio\n1       1      3      3      3                2.50\n2       5      5      4      5                4.75\n3       5      4      3      3                3.75\n4       4      3      4      5                4.00\n5       5      2      2      4                3.25\n6       4      3      4      4                3.75\n7       1      1      3      3                2.00\n8       3      3      2      2                2.50\n9       2      4      3      4                3.25\n10      2      2      3      3                2.50\n\nfrq(elsoc_7$satisfaccion_barrio)\n\nx &lt;numeric&gt; \n# total N=20761 valid N=17845 mean=3.54 sd=0.79\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n 1.00 |  177 |  0.85 |    0.99 |   0.99\n 1.25 |   30 |  0.14 |    0.17 |   1.16\n 1.50 |   69 |  0.33 |    0.39 |   1.55\n 1.67 |    3 |  0.01 |    0.02 |   1.56\n 1.75 |  149 |  0.72 |    0.83 |   2.40\n 2.00 |  787 |  3.79 |    4.41 |   6.81\n 2.25 |  434 |  2.09 |    2.43 |   9.24\n 2.33 |   19 |  0.09 |    0.11 |   9.35\n 2.50 |  809 |  3.90 |    4.53 |  13.88\n 2.67 |   34 |  0.16 |    0.19 |  14.07\n 2.75 |  819 |  3.94 |    4.59 |  18.66\n 3.00 | 1465 |  7.06 |    8.21 |  26.87\n 3.25 | 1359 |  6.55 |    7.62 |  34.49\n 3.33 |   41 |  0.20 |    0.23 |  34.72\n 3.50 | 1999 |  9.63 |   11.20 |  45.92\n 3.67 |   30 |  0.14 |    0.17 |  46.09\n 3.75 | 2084 | 10.04 |   11.68 |  57.76\n 4.00 | 5042 | 24.29 |   28.25 |  86.02\n 4.25 |  691 |  3.33 |    3.87 |  89.89\n 4.33 |    8 |  0.04 |    0.04 |  89.94\n 4.50 |  405 |  1.95 |    2.27 |  92.21\n 4.67 |    6 |  0.03 |    0.03 |  92.24\n 4.75 |  377 |  1.82 |    2.11 |  94.35\n 5.00 | 1008 |  4.86 |    5.65 | 100.00\n &lt;NA&gt; | 2916 | 14.05 |    &lt;NA&gt; |   &lt;NA&gt;\n\nelsoc_7$satisfaccion_barrio &lt;- (round(elsoc_7$satisfaccion_barrio * 2) / 2)\nfrq(elsoc_7$satisfaccion_barrio)\n\nx &lt;numeric&gt; \n# total N=20761 valid N=17845 mean=3.56 sd=0.82\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n 1.00 |  207 |  1.00 |    1.16 |   1.16\n 1.50 |   72 |  0.35 |    0.40 |   1.56\n 2.00 | 1370 |  6.60 |    7.68 |   9.24\n 2.50 |  862 |  4.15 |    4.83 |  14.07\n 3.00 | 3643 | 17.55 |   20.41 |  34.49\n 3.50 | 2070 |  9.97 |   11.60 |  46.09\n 4.00 | 7817 | 37.65 |   43.80 |  89.89\n 4.50 |  419 |  2.02 |    2.35 |  92.24\n 5.00 | 1385 |  6.67 |    7.76 | 100.00\n &lt;NA&gt; | 2916 | 14.05 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\nDesde el punto 1 al 3.5 están el %45.92 de las observaciones.\n\n\n2.2.2 Migración\n\nfrq(elsoc_7$r12_03)\n\nGrado de acuerdo: Chile pierde su identidad con llegada de [PER/HAI/VEN] (x) &lt;numeric&gt; \n# total N=20761 valid N=20398 mean=2.94 sd=1.16\n\nValue |                          Label |    N | Raw % | Valid % | Cum. %\n------------------------------------------------------------------------\n    1 |       Totalmente en desacuerdo | 1831 |  8.82 |    8.98 |   8.98\n    2 |                  En desacuerdo | 7304 | 35.18 |   35.81 |  44.78\n    3 | Ni en desacuerdo ni de acuerdo | 3056 | 14.72 |   14.98 |  59.77\n    4 |                     De acuerdo | 6599 | 31.79 |   32.35 |  92.12\n    5 |          Totalmente de acuerdo | 1608 |  7.75 |    7.88 | 100.00\n &lt;NA&gt; |                           &lt;NA&gt; |  363 |  1.75 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\nLas personas que están de acuerdo con que los migrantes erosionan la identidad del país es de un %40.23, mientras quellos que están en desacuerdo con esta sentencia hacen el %44.78 (y un %14.98 sería de la categoría neutral).",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Dimensión: Vínculos territoriales y Variables de migración</span>"
    ]
  },
  {
    "objectID": "vinculos-territoriales-rev.html#recategorización",
    "href": "vinculos-territoriales-rev.html#recategorización",
    "title": "2  Dimensión: Vínculos territoriales y Variables de migración",
    "section": "2.3 Recategorización",
    "text": "2.3 Recategorización\n\n2.3.1 Vínculos territoriales\nDe acuerdo a los resultados descriptivos, vamos a recategorizar ambos índices en el punto corte &lt;= 3.5 como categoría baja y &gt; 3.5 como categoría alta.\n\n# Sentido de pertenencia con corte en &lt;= 3.5\n\nelsoc_7 &lt;- elsoc_7 %&gt;%\n  mutate(sentido_pertenencia2 = case_when(\n    sentido_pertenencia &gt;= 1 & sentido_pertenencia &lt;= 3.5 ~ \"Bajo\",\n    sentido_pertenencia &gt; 3.5 & sentido_pertenencia &lt;= 5 ~ \"Alto\",\n    TRUE ~ NA_character_\n  ))\n\n\n# Satisfacción con el barrio con corte en &lt;= 3.5\n\nelsoc_7 &lt;- elsoc_7 %&gt;%\n  mutate(satisfaccion_barrio2 = case_when(\n    satisfaccion_barrio &gt;= 1 & satisfaccion_barrio &lt;= 3.5 ~ \"Bajo\",\n    satisfaccion_barrio &gt; 3.5 & satisfaccion_barrio &lt;= 5 ~ \"Alto\",\n    TRUE ~ NA_character_\n  ))\n\nA priori, sería mejor trabajar con los cortes en 3.5, ya que las frecuencias están mejor equilibradas en ambos índices.\nSe reordenan las categorías en Alto y Bajo\n\nelsoc_7$sentido_pertenencia2 &lt;- factor(elsoc_7$sentido_pertenencia2, levels = c(\"Alto\", \"Bajo\"))\nfrq(elsoc_7$sentido_pertenencia2)\n\nx &lt;categorical&gt; \n# total N=20761 valid N=17858 mean=1.36 sd=0.48\n\nValue |     N | Raw % | Valid % | Cum. %\n----------------------------------------\nAlto  | 11439 | 55.10 |   64.06 |  64.06\nBajo  |  6419 | 30.92 |   35.94 | 100.00\n&lt;NA&gt;  |  2903 | 13.98 |    &lt;NA&gt; |   &lt;NA&gt;\n\nelsoc_7$satisfaccion_barrio2 &lt;- factor(elsoc_7$satisfaccion_barrio2, levels = c(\"Alto\", \"Bajo\"))\nfrq(elsoc_7$satisfaccion_barrio2)\n\nx &lt;categorical&gt; \n# total N=20761 valid N=17845 mean=1.46 sd=0.50\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\nAlto  | 9621 | 46.34 |   53.91 |  53.91\nBajo  | 8224 | 39.61 |   46.09 | 100.00\n&lt;NA&gt;  | 2916 | 14.05 |    &lt;NA&gt; |   &lt;NA&gt;\n\n# check\n\nfrq(elsoc_7$sentido_pertenencia2)\n\nx &lt;categorical&gt; \n# total N=20761 valid N=17858 mean=1.36 sd=0.48\n\nValue |     N | Raw % | Valid % | Cum. %\n----------------------------------------\nAlto  | 11439 | 55.10 |   64.06 |  64.06\nBajo  |  6419 | 30.92 |   35.94 | 100.00\n&lt;NA&gt;  |  2903 | 13.98 |    &lt;NA&gt; |   &lt;NA&gt;\n\nfrq(elsoc_7$satisfaccion_barrio2)\n\nx &lt;categorical&gt; \n# total N=20761 valid N=17845 mean=1.46 sd=0.50\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\nAlto  | 9621 | 46.34 |   53.91 |  53.91\nBajo  | 8224 | 39.61 |   46.09 | 100.00\n&lt;NA&gt;  | 2916 | 14.05 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n\n2.3.2 Migración\nLa variable de migración que alude a la pérdida de identidad debido a migrantes se recodifica en tres categorías, colapsando las categorías “Totalmente en desacuerdo” con “En desacuerdo”, y “De acuerdo” con “Totalmente de acuerdo”, mientras que la categoría neutra se categoriza como “Otro”.\n\nelsoc_7 &lt;- elsoc_7 %&gt;%\n  mutate(perdida_identidad2 = case_when(\n    r12_03 &gt;= 1 & r12_03 &lt;= 2 ~ \"Muy en desacuerdo + en desacuerdo\",\n    r12_03 &gt;= 2 & r12_03 &lt;= 3 ~ \"Otro\",\n    r12_03 &gt; 3 & r12_03 &lt;= 5 ~ \"Muy de acuerdo + de acuerdo\",\n    TRUE ~ NA_character_\n  ))\n\n\n#check\nfrq(elsoc_7$perdida_identidad2)\n\nx &lt;character&gt; \n# total N=20761 valid N=20398 mean=1.75 sd=0.70\n\nValue                             |    N | Raw % | Valid % | Cum. %\n-------------------------------------------------------------------\nMuy de acuerdo + de acuerdo       | 8207 | 39.53 |   40.23 |  40.23\nMuy en desacuerdo + en desacuerdo | 9135 | 44.00 |   44.78 |  85.02\nOtro                              | 3056 | 14.72 |   14.98 | 100.00\n&lt;NA&gt;                              |  363 |  1.75 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\ntabla_cruzada &lt;- elsoc_7 %&gt;%\n  filter(!is.na(sentido_pertenencia2) & !is.na(perdida_identidad2) & perdida_identidad2 == \"Muy de acuerdo + de acuerdo\") %&gt;%\n  group_by(ola, sentido_pertenencia2) %&gt;%\n  summarise(n = n()) %&gt;%  \n  group_by(ola) %&gt;%\n  mutate(total_ola = sum(n),\n         porcentaje = (n / total_ola) * 100) %&gt;%\n  ungroup()\n\nknitr::kable(tabla_cruzada, format = \"markdown\", caption = \"Tabla cruzada de sentido de pertenencia y pérdida de identidad (Muy de acuerdo + de acuerdo) por ola - porcentaje dentro de ola\")\n\n\nTabla cruzada de sentido de pertenencia y pérdida de identidad (Muy de acuerdo + de acuerdo) por ola - porcentaje dentro de ola\n\n\nola\nsentido_pertenencia2\nn\ntotal_ola\nporcentaje\n\n\n\n\n1\nAlto\n702\n1184\n59.29054\n\n\n1\nBajo\n482\n1184\n40.70946\n\n\n2\nAlto\n613\n935\n65.56150\n\n\n2\nBajo\n322\n935\n34.43850\n\n\n3\nAlto\n869\n1383\n62.83442\n\n\n3\nBajo\n514\n1383\n37.16558\n\n\n4\nAlto\n811\n1217\n66.63928\n\n\n4\nBajo\n406\n1217\n33.36072\n\n\n6\nAlto\n709\n1093\n64.86734\n\n\n6\nBajo\n384\n1093\n35.13266\n\n\n7\nAlto\n810\n1244\n65.11254\n\n\n7\nBajo\n434\n1244\n34.88746\n\n\n\n\n\n\ntabla_cruzada2 &lt;- elsoc_7 %&gt;%\n  filter(!is.na(sentido_pertenencia2) & !is.na(perdida_identidad2) & perdida_identidad2 == \"Muy en desacuerdo + en desacuerdo\") %&gt;%\n  group_by(ola, sentido_pertenencia2) %&gt;%\n  summarise(n = n()) %&gt;%  \n  group_by(ola) %&gt;%\n  mutate(total_ola = sum(n),\n         porcentaje = (n / total_ola) * 100) %&gt;%\n  ungroup()\n\nknitr::kable(tabla_cruzada2, format = \"markdown\", caption = \"Tabla cruzada de sentido de pertenencia y pérdida de identidad (Muy en desacuerdo + en desacuerdo) por ola - porcentaje dentro de ola\")\n\n\nTabla cruzada de sentido de pertenencia y pérdida de identidad (Muy en desacuerdo + en desacuerdo) por ola - porcentaje dentro de ola\n\n\nola\nsentido_pertenencia2\nn\ntotal_ola\nporcentaje\n\n\n\n\n1\nAlto\n774\n1295\n59.76834\n\n\n1\nBajo\n521\n1295\n40.23166\n\n\n2\nAlto\n721\n1145\n62.96943\n\n\n2\nBajo\n424\n1145\n37.03057\n\n\n3\nAlto\n1065\n1666\n63.92557\n\n\n3\nBajo\n601\n1666\n36.07443\n\n\n4\nAlto\n1075\n1630\n65.95092\n\n\n4\nBajo\n555\n1630\n34.04908\n\n\n6\nAlto\n698\n1067\n65.41706\n\n\n6\nBajo\n369\n1067\n34.58294\n\n\n7\nAlto\n658\n1027\n64.07011\n\n\n7\nBajo\n369\n1027\n35.92989\n\n\n\n\n\n\nelsoc_7_pond &lt;- elsoc_7 %&gt;% \n  as_survey_design(ids = segmento, \n                   strata = estrato, \n                   weights = ponderador_long_total,\n                   nest = T)\n\n\na &lt;- elsoc_7_pond %&gt;%\n  select(ola, sentido_pertenencia, perdida_identidad2) %&gt;%\n  filter(perdida_identidad2!=\"Otro\") %&gt;%\n  mutate(sentido_pertenencia = case_when(\n    sentido_pertenencia &lt;= 3.5 ~ \"Baja\",\n    sentido_pertenencia &gt; 3.5   ~ \"Alta\"\n  ),\n  perdida_identidad2 = forcats::fct_relabel(\n    perdida_identidad2, ~ str_wrap(.x, 20))) %&gt;%\n  tidyr::drop_na() %&gt;%\n  filter(ola == last(ola)) %&gt;%\n  group_by(perdida_identidad2, sentido_pertenencia) %&gt;%\n  survey_count(vartype = NULL) %&gt;%\n  group_by(sentido_pertenencia) %&gt;%\n  mutate(\n    prop  = 100 * n / sum(n),                 # porcentaje dentro de cada ola\n    label = scales::percent(prop/100, accuracy = 0.1)\n  ) %&gt;%\n  ggplot(aes(x = perdida_identidad2, y = prop, fill = sentido_pertenencia)) +\n  geom_col(position = position_dodge(width = 0.6), width = 0.6) +\n  geom_text(\n    aes(label = label, color = sentido_pertenencia),   # color igual a la serie\n    position = position_dodge(width = 0.6),\n    vjust = -0.4, size = 5, fontface = \"bold\", show.legend = FALSE\n  ) +\n  scale_fill_manual(\n    name = \"Sentido de pertenencia\",\n    values = c(\"Baja\" = \"#F9913D\", \"Alta\" = \"#2B2F3C\")\n  ) +\n  scale_color_manual(                                 # mismo esquema para el texto\n    values = c(\"Baja\" = \"#F9913D\", \"Alta\" = \"#2B2F3C\")\n  ) +\n  scale_y_continuous(\n    labels = function(p){paste0(p, \"%\")},\n    limits = c(0,100),\n    breaks = seq(0,100, by = 10),\n    expand = expansion(mult = c(0.02, 0.08)) # deja aire arriba para las etiquetas\n  )  +\n    labs(\n      x = \"Pérdida de identidad debido a migrantes\",\n      y = NULL,\n      caption = \"Fuente: elaboración propia con datos de ELSOC 2023 \\n Nota: Para el calculo se excluye la categoría intermedia (Ni de acuerdo ni en desacuerdo)\"\n    ) +\n  theme_ggdist() +\n  theme(\n    plot.title   = element_text(size = 24, face = \"bold\", hjust = 0.5),\n    plot.subtitle = element_text(size = 16, face = \"italic\", hjust = 0.5),\n    plot.caption = element_text(size = 14),\n    axis.title.x = element_text(size = 18),\n    axis.title.y = element_text(size = 18),\n    axis.text.x  = element_text(size = 16),\n    axis.text.y  = element_text(size = 16),\n    legend.title = element_text(size = 16, face = \"bold\"),\n    legend.text  = element_text(size = 14),\n    legend.box.background = element_rect(color = \"grey20\", fill = \"white\", linewidth = 0.5),\n    legend.background     = element_rect(fill = \"white\", color = NA),\n    legend.margin         = margin(t = 6, r = 8, b = 6, l = 8),\n    legend.box.margin     = margin(t = 6, r = 6, b = 6, l = 6),\n    legend.position  = \"top\",\n    legend.direction = \"horizontal\"\n  ) +\n  guides(\n    color = guide_legend(\n      title.position = \"top\",\n      label.position = \"right\",\n      nrow = 1, byrow = TRUE,\n      keywidth = unit(14, \"pt\"),\n      keyheight = unit(10, \"pt\")\n    )\n  )\n\n\nb &lt;- elsoc_7_pond %&gt;%\n  select(ola, satisfaccion_barrio, perdida_identidad2) %&gt;%\n  filter(perdida_identidad2!=\"Otro\") %&gt;%\n  mutate(satisfaccion_barrio = case_when(\n    satisfaccion_barrio &lt;= 3.5 ~ \"Baja\",\n    satisfaccion_barrio &gt; 3.5   ~ \"Alta\"\n  ),\n  perdida_identidad2 = forcats::fct_relabel(\n    perdida_identidad2, ~ str_wrap(.x, 20))) %&gt;%\n  tidyr::drop_na() %&gt;%\n  filter(ola == last(ola)) %&gt;%\n  group_by(perdida_identidad2, satisfaccion_barrio) %&gt;%\n  survey_count(vartype = NULL) %&gt;%\n  group_by(satisfaccion_barrio) %&gt;%\n  mutate(\n    prop  = 100 * n / sum(n),                 # porcentaje dentro de cada ola\n    label = scales::percent(prop/100, accuracy = 0.1)\n  ) %&gt;%\n  ggplot(aes(x = perdida_identidad2, y = prop, fill = satisfaccion_barrio)) +\n  geom_col(position = position_dodge(width = 0.6), width = 0.6) +\n  geom_text(\n    aes(label = label, color = satisfaccion_barrio),   # color igual a la serie\n    position = position_dodge(width = 0.6),\n    vjust = -0.4, size = 5, fontface = \"bold\", show.legend = FALSE\n  ) +\n  scale_fill_manual(\n    name = \"Satisfacción con el barrio\",\n    values = c(\"Baja\" = \"#F9913D\", \"Alta\" = \"#2B2F3C\")\n  ) +\n  scale_color_manual(                                 # mismo esquema para el texto\n    values = c(\"Baja\" = \"#F9913D\", \"Alta\" = \"#2B2F3C\")\n  ) +\n  scale_y_continuous(\n    labels = function(p){paste0(p, \"%\")},\n    limits = c(0,100),\n    breaks = seq(0,100, by = 10),\n    expand = expansion(mult = c(0.02, 0.08)) # deja aire arriba para las etiquetas\n  )  +\n    labs(\n      x = \"Pérdida de identidad debido a migrantes\",\n      y = NULL,\n      caption = \"Fuente: elaboración propia con datos de ELSOC 2023 \\n Nota: Para el calculo se excluye la categoría intermedia (Ni de acuerdo ni en desacuerdo)\"\n    ) +\n  theme_ggdist() +\n  theme(\n    plot.title   = element_text(size = 24, face = \"bold\", hjust = 0.5),\n    plot.subtitle = element_text(size = 16, face = \"italic\", hjust = 0.5),\n    plot.caption = element_text(size = 14),\n    axis.title.x = element_text(size = 18),\n    axis.title.y = element_text(size = 18),\n    axis.text.x  = element_text(size = 16),\n    axis.text.y  = element_text(size = 16),\n    legend.title = element_text(size = 16, face = \"bold\"),\n    legend.text  = element_text(size = 14),\n    legend.box.background = element_rect(color = \"grey20\", fill = \"white\", linewidth = 0.5),\n    legend.background     = element_rect(fill = \"white\", color = NA),\n    legend.margin         = margin(t = 6, r = 8, b = 6, l = 8),\n    legend.box.margin     = margin(t = 6, r = 6, b = 6, l = 6),\n    legend.position  = \"top\",\n    legend.direction = \"horizontal\"\n  ) +\n  guides(\n    color = guide_legend(\n      title.position = \"top\",\n      label.position = \"right\",\n      nrow = 1, byrow = TRUE,\n      keywidth = unit(14, \"pt\"),\n      keyheight = unit(10, \"pt\")\n    )\n  )\n\nGuardamos los gráficos\n\nggsave(\"pertenencia-identidad.png\", plot = a, width = 8, height = 6, dpi = 300)\nggsave(\"satisfaccion-identidad.png\", plot = b, width = 8, height = 6, dpi = 300)",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Dimensión: Vínculos territoriales y Variables de migración</span>"
    ]
  },
  {
    "objectID": "redes-rev.html",
    "href": "redes-rev.html",
    "title": "3  Dimensión: Redes sociales",
    "section": "",
    "text": "3.1 Cargar Librerías y espacio de trabajo\nEl objetivo de este script es mostrar las decisiones metodológicas para la construcción de los subíndices de migración y redes sociales para la producción de figuras con la información que se muestra en el reporte CEP 2025:\nhttps://ocscoes.github.io/propuesta-medicion-elsoc/presentations/CEP_2025/cep_2025.html#/7/3",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Dimensión: Redes sociales</span>"
    ]
  },
  {
    "objectID": "redes-rev.html#data",
    "href": "redes-rev.html#data",
    "title": "3  Dimensión: Redes sociales",
    "section": "3.2 Data",
    "text": "3.2 Data\nCall original dataset\n\nload(here('input/data/raw_data/elsoc.RData'))\nelsoc_long &lt;- elsoc_long_2016_2023 # acortar\n\nmissing_codes &lt;- c(-999, -888, -777, -666)\nelsoc_long &lt;- elsoc_long %&gt;%\n  mutate(across(everything(), ~ sjlabelled::set_na(.x, na = missing_codes)))",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Dimensión: Redes sociales</span>"
    ]
  },
  {
    "objectID": "redes-rev.html#univariados-variables",
    "href": "redes-rev.html#univariados-variables",
    "title": "3  Dimensión: Redes sociales",
    "section": "4.1 Univariados: Variables",
    "text": "4.1 Univariados: Variables\nEl índice de Ayuda Económica se compone de:\n\nFrecuencia: prestar $10.000 o más\nFrecuencia: ayudar a encontrar trabajo a alguien\n\nDonde:\n\nfind_var(data = elsoc_long,\"presto\") # corresponde a c07_06\nfrq(elsoc_long$c07_06)\nfind_var(data = elsoc_long,\"trabajo\") # corresponde a c07_08\nfrq(elsoc_long$c07_08)\n\nPor su parte, la variable que sobre la percepción en torno al desempleo a causa de la migración:\n\nfind_var(data = elsoc_long,\"desem\") # corresponde a r12_04\nfrq(elsoc_long$r12_04)",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Dimensión: Redes sociales</span>"
    ]
  },
  {
    "objectID": "redes-rev.html#selección-missings-y-recodificación",
    "href": "redes-rev.html#selección-missings-y-recodificación",
    "title": "3  Dimensión: Redes sociales",
    "section": "4.2 Selección, missings y recodificación",
    "text": "4.2 Selección, missings y recodificación\n\ncheck3 &lt;- elsoc_long %&gt;%\n  select(c07_06, c07_08, ola, r12_04)\n\n# cheq\nfrq(check3$r12_04) # ok\n\nGrado de acuerdo: Con llegada de [PER/HAI/VEN] aumenta el desempleo (x) &lt;numeric&gt; \n# total N=20761 valid N=20456 mean=3.23 sd=1.17\n\nValue |                          Label |    N | Raw % | Valid % | Cum. %\n------------------------------------------------------------------------\n    1 |       Totalmente en desacuerdo | 1325 |  6.38 |    6.48 |   6.48\n    2 |                  En desacuerdo | 5781 | 27.85 |   28.26 |  34.74\n    3 | Ni en desacuerdo ni de acuerdo | 2594 | 12.49 |   12.68 |  47.42\n    4 |                     De acuerdo | 8338 | 40.16 |   40.76 |  88.18\n    5 |          Totalmente de acuerdo | 2418 | 11.65 |   11.82 | 100.00\n &lt;NA&gt; |                           &lt;NA&gt; |  305 |  1.47 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\ncheck3$ayu_eco &lt;- rowMeans(check3[,c(\"c07_06\",\"c07_08\")], na.rm = TRUE) \n\nslice(check3,1:10) %&gt;% select(c07_06, c07_08, ayu_eco, ola) # check ok\n\n   c07_06 c07_08 ayu_eco ola\n1       3      1     2.0   1\n2       1      2     1.5   1\n3       3      2     2.5   1\n4       3      2     2.5   1\n5       3      1     2.0   1\n6       3      1     2.0   1\n7       3      2     2.5   1\n8       2      2     2.0   1\n9       3      1     2.0   1\n10      2      2     2.0   1\n\n\n\nfrq(check3$ayu_eco) # ok\n\nx &lt;numeric&gt; \n# total N=20761 valid N=18014 mean=2.03 sd=0.69\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n 1.00 | 3290 | 15.85 |   18.26 |  18.26\n 1.50 | 2960 | 14.26 |   16.43 |  34.70\n 2.00 | 4995 | 24.06 |   27.73 |  62.42\n 2.50 | 2947 | 14.19 |   16.36 |  78.78\n 3.00 | 3822 | 18.41 |   21.22 | 100.00\n &lt;NA&gt; | 2747 | 13.23 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\nEn el caso del índice de ayuda económica, los valores se concentran principalmente en el tramo inferior: hasta el valor 2.00 se acumula un 62% de los casos, mientras que los valores de 2.50 en adelante reúnen solo el 38%. Esta distribución, claramente sesgada hacia los valores bajos, respalda la decisión de establecer un punto de corte en 2.00, diferenciando entre un grupo con percepción baja (≤2.00) y otro con percepción alta (≥2.50) de ayuda económica. El criterio combina justificación empírica —dada la asimetría de la distribución— y sentido conceptual, en tanto permite distinguir entre quienes presentan poca versus mayor ayuda.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Dimensión: Redes sociales</span>"
    ]
  },
  {
    "objectID": "redes-rev.html#variación-por-ola",
    "href": "redes-rev.html#variación-por-ola",
    "title": "3  Dimensión: Redes sociales",
    "section": "4.3 Variación por ola",
    "text": "4.3 Variación por ola\n\nfrq(check3$ola) # ok\n\nIdentificador de ola de encuesta (x) &lt;numeric&gt; \n# total N=20761 valid N=20761 mean=3.95 sd=1.94\n\nValue | Label |    N | Raw % | Valid % | Cum. %\n-----------------------------------------------\n    1 |  2016 | 2927 | 14.10 |   14.10 |  14.10\n    2 |  2017 | 2473 | 11.91 |   11.91 |  26.01\n    3 |  2018 | 3748 | 18.05 |   18.05 |  44.06\n    4 |  2019 | 3417 | 16.46 |   16.46 |  60.52\n    5 |  2021 | 2740 | 13.20 |   13.20 |  73.72\n    6 |  2022 | 2730 | 13.15 |   13.15 |  86.87\n    7 |  2023 | 2726 | 13.13 |   13.13 | 100.00\n &lt;NA&gt; |  &lt;NA&gt; |    0 |  0.00 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n# Tabla con el promedio de seguridad subjetiva por ola\nayuda_por_ola &lt;- check3 %&gt;%\n  group_by(ola) %&gt;%\n  summarise(promedio_ayuda_economica = mean(ayu_eco, na.rm = TRUE)) \n\nif (!exists(\"table_format\")) table_format &lt;- \"simple\"\n\nknitr::kable(ayuda_por_ola, format = table_format, caption = \"Promedio de Ayuda Económica por ola\")\n\n\nPromedio de Ayuda Económica por ola\n\n\nola\npromedio_ayuda_economica\n\n\n\n\n1\n2.066883\n\n\n2\n2.035425\n\n\n3\n2.029757\n\n\n4\n1.982582\n\n\n5\n2.052892\n\n\n6\n\n\n\n7\n2.016875\n\n\n\n\n\nLos promedios del índice de ayuda económica por ola se mantienen estables en torno a la categoría 2, con variaciones mínimas a lo largo del tiempo. Este patrón evidencia que la percepción de ayuda económica presenta una estabilidad estructural y se ubica de manera consistente en el tramo bajo de la escala. La persistencia de valores medios próximos a 2.00 refuerza el criterio de dicotomizar la variable en dos grupos (≤2 vs. ≥2.5), diferenciando a la mayoría con percepciones bajas de ayuda económica de la minoría que reporta niveles más altos.\nA continuación se presentan tablas que muestran el promedio de seguridad subjetiva por ola para cada categoría de respuesta en r12_04\n\n# Tabla con el promedio de Ayuda Económica por ola y por categorías de r12_04 (desempleo migrantes)\n\nayuda_por_ola_desempleo &lt;- check3 %&gt;%\n  group_by(ola, r12_04) %&gt;%\n  summarise(promedio_ayuda_economica = mean(ayu_eco, na.rm = TRUE), n = n()) %&gt;%\n  ungroup()\n\nknitr::kable(ayuda_por_ola_desempleo, format = table_format, caption = \"Promedio de Ayuda Económica por ola y categoría de migración (r12_04)\")\n\n\nPromedio de Ayuda Económica por ola y categoría de migración (r12_04)\n\n\nola\nr12_04\npromedio_ayuda_economica\nn\n\n\n\n\n1\n1\n2.172131\n122\n\n\n1\n2\n2.086000\n750\n\n\n1\n3\n2.017804\n338\n\n\n1\n4\n2.043741\n1327\n\n\n1\n5\n2.172107\n338\n\n\n1\n\n1.764706\n52\n\n\n2\n1\n2.140777\n206\n\n\n2\n2\n2.129765\n683\n\n\n2\n3\n1.962712\n295\n\n\n2\n4\n2.028460\n897\n\n\n2\n5\n1.906877\n349\n\n\n2\n\n1.714286\n43\n\n\n3\n1\n2.096491\n285\n\n\n3\n2\n2.095829\n1008\n\n\n3\n3\n2.017822\n505\n\n\n3\n4\n1.984902\n1424\n\n\n3\n5\n2.061033\n426\n\n\n3\n\n1.740000\n100\n\n\n4\n1\n2.149402\n251\n\n\n4\n2\n2.049325\n963\n\n\n4\n3\n1.938849\n417\n\n\n4\n4\n1.900968\n1344\n\n\n4\n5\n2.053140\n414\n\n\n4\n\n1.714286\n28\n\n\n5\n1\n2.200000\n135\n\n\n5\n2\n2.103842\n837\n\n\n5\n3\n2.058176\n319\n\n\n5\n4\n2.008551\n1113\n\n\n5\n5\n2.039474\n305\n\n\n5\n\n1.709677\n31\n\n\n6\n1\n\n155\n\n\n6\n2\n\n856\n\n\n6\n3\n\n338\n\n\n6\n4\n\n1087\n\n\n6\n5\n\n272\n\n\n6\n\n\n22\n\n\n7\n1\n2.125731\n171\n\n\n7\n2\n2.131579\n684\n\n\n7\n3\n1.952880\n382\n\n\n7\n4\n1.954189\n1146\n\n\n7\n5\n2.038217\n314\n\n\n7\n\n1.758621\n29\n\n\n\n\n\n\n# Tabla ordenada por r12_04\nayuda_por_ola_desempleo_ordered &lt;- ayuda_por_ola_desempleo %&gt;%\n  arrange(r12_04, ola)\n\nknitr::kable(ayuda_por_ola_desempleo_ordered, format = table_format, caption = \"Promedio de ayuda económica por ola y categoría de migración (r12_04) - Ordenado por r12_04\")\n\n\nPromedio de ayuda económica por ola y categoría de migración (r12_04) - Ordenado por r12_04\n\n\nola\nr12_04\npromedio_ayuda_economica\nn\n\n\n\n\n1\n1\n2.172131\n122\n\n\n2\n1\n2.140777\n206\n\n\n3\n1\n2.096491\n285\n\n\n4\n1\n2.149402\n251\n\n\n5\n1\n2.200000\n135\n\n\n6\n1\n\n155\n\n\n7\n1\n2.125731\n171\n\n\n1\n2\n2.086000\n750\n\n\n2\n2\n2.129765\n683\n\n\n3\n2\n2.095829\n1008\n\n\n4\n2\n2.049325\n963\n\n\n5\n2\n2.103842\n837\n\n\n6\n2\n\n856\n\n\n7\n2\n2.131579\n684\n\n\n1\n3\n2.017804\n338\n\n\n2\n3\n1.962712\n295\n\n\n3\n3\n2.017822\n505\n\n\n4\n3\n1.938849\n417\n\n\n5\n3\n2.058176\n319\n\n\n6\n3\n\n338\n\n\n7\n3\n1.952880\n382\n\n\n1\n4\n2.043741\n1327\n\n\n2\n4\n2.028460\n897\n\n\n3\n4\n1.984902\n1424\n\n\n4\n4\n1.900968\n1344\n\n\n5\n4\n2.008551\n1113\n\n\n6\n4\n\n1087\n\n\n7\n4\n1.954189\n1146\n\n\n1\n5\n2.172107\n338\n\n\n2\n5\n1.906877\n349\n\n\n3\n5\n2.061033\n426\n\n\n4\n5\n2.053140\n414\n\n\n5\n5\n2.039474\n305\n\n\n6\n5\n\n272\n\n\n7\n5\n2.038217\n314\n\n\n1\n\n1.764706\n52\n\n\n2\n\n1.714286\n43\n\n\n3\n\n1.740000\n100\n\n\n4\n\n1.714286\n28\n\n\n5\n\n1.709677\n31\n\n\n6\n\n\n22\n\n\n7\n\n1.758621\n29\n\n\n\n\n\nYa definidos los puntos de corte para cada categoría, se recodifica el índice de ayuda económica.\n\n# Recodificar índice de ayuda económica en bajo y alto\ncheck3 &lt;- check3 %&gt;%\n  mutate(ayu_eco3 = case_when(\n    ayu_eco &gt;= 1 & ayu_eco &lt;= 2 ~ \"Bajo\",\n    ayu_eco &gt; 2 & ayu_eco &lt;= 3 ~ \"Alto\",\n    TRUE ~ NA_character_\n  ))  \n\nfrq(check3$ayu_eco3) # ok\n\nx &lt;character&gt; \n# total N=20761 valid N=18014 mean=1.62 sd=0.48\n\nValue |     N | Raw % | Valid % | Cum. %\n----------------------------------------\nAlto  |  6769 | 32.60 |   37.58 |  37.58\nBajo  | 11245 | 54.16 |   62.42 | 100.00\n&lt;NA&gt;  |  2747 | 13.23 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\nAsí mismo, se muestra nuevamente la distribución de casos en los extremos para la variable de desempleo migrantes en tablas de frecuencia.\n\n# recodificar r12_04 (desempleo migrantes) en muy de acuerdo = 1, el resto=0, sacando los NAs\ncheck3 &lt;- check3 %&gt;%\n  mutate(desempleo_migrantes5 = case_when(\n    r12_04 == 5 ~ \"Muy de acuerdo\",\n    r12_04 %in% c(1, 2, 3, 4) ~ \"Otro\",\n    TRUE ~ NA_character_\n  ))\nfrq(check3$desempleo_migrantes5) # ok\n\nx &lt;character&gt; \n# total N=20761 valid N=20456 mean=1.88 sd=0.32\n\nValue          |     N | Raw % | Valid % | Cum. %\n-------------------------------------------------\nMuy de acuerdo |  2418 | 11.65 |   11.82 |  11.82\nOtro           | 18038 | 86.88 |   88.18 | 100.00\n&lt;NA&gt;           |   305 |  1.47 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n# recodificar r12_04 (desempleo migrantes) en muy en desacuerdo = 1, el resto=0, sacando los NAs\ncheck3 &lt;- check3 %&gt;%\n  mutate(desempleo_migrantes1 = case_when(\n    r12_04 == 1 ~ \"Muy en desacuerdo\",\n    r12_04 %in% c(2, 3, 4,5) ~ \"Otro\",\n    TRUE ~ NA_character_\n  ))\nfrq(check3$desempleo_migrantes1) # ok\n\nx &lt;character&gt; \n# total N=20761 valid N=20456 mean=1.94 sd=0.25\n\nValue             |     N | Raw % | Valid % | Cum. %\n----------------------------------------------------\nMuy en desacuerdo |  1325 |  6.38 |    6.48 |   6.48\nOtro              | 19131 | 92.15 |   93.52 | 100.00\n&lt;NA&gt;              |   305 |  1.47 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\nEn la distribución de la afirmación sobre desempleo y migración se observa que los extremos concentran una proporción minoritaria de casos: un 11.8% se declara “Muy de acuerdo”, mientras que solo un 6.5% se manifiesta “Muy en desacuerdo”. La gran mayoría de las respuestas (≈90%) se ubican en posiciones distintas a los extremos. Esta asimetría revela que, aunque los posicionamientos radicales son poco frecuentes, existe una mayor inclinación hacia el extremo afirmativo, lo que sugiere que la percepción de que los migrantes afectan el empleo tiene mayor arraigo que su rechazo frontal, pero no es significativo para evaluar a partir de estas categorías.\n\n#recodificar ayuda económica en baja y alta\ncheck3 &lt;- check3 %&gt;%\n  mutate(ayu_eco2 = case_when(\n    ayu_eco &gt;= 1 & ayu_eco &lt;= 2 ~ \"Baja\",\n    ayu_eco &gt; 2 & ayu_eco &lt;= 3 ~ \"Alta\",\n    TRUE ~ NA_character_\n  ))  \ncheck3$ayu_eco2 &lt;- factor(check3$ayu_eco2, levels = c(\"Alta\", \"Baja\"))\nfrq(check3$ayu_eco2)\n\nx &lt;categorical&gt; \n# total N=20761 valid N=18014 mean=1.62 sd=0.48\n\nValue |     N | Raw % | Valid % | Cum. %\n----------------------------------------\nAlta  |  6769 | 32.60 |   37.58 |  37.58\nBaja  | 11245 | 54.16 |   62.42 | 100.00\n&lt;NA&gt;  |  2747 | 13.23 |    &lt;NA&gt; |   &lt;NA&gt;",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Dimensión: Redes sociales</span>"
    ]
  },
  {
    "objectID": "migracion-rev.html#recodificaciones-para-la-preparación-de-gráficos",
    "href": "migracion-rev.html#recodificaciones-para-la-preparación-de-gráficos",
    "title": "1  Dimensión: Seguridad pública",
    "section": "2.5 Recodificaciones para la preparación de gráficos",
    "text": "2.5 Recodificaciones para la preparación de gráficos\n\n# recodificar indice seguridad subjetiva en bajo (&lt;=3) y alto (&gt;3)\ncheck1 &lt;- check1 %&gt;%\n  mutate(seg_sub3 = case_when(\n    seg_sub &gt;=1 & seg_sub &lt;= 3 ~ \"Bajo\",\n    seg_sub &gt; 3 & seg_sub &lt;= 5 ~ \"Alto\",\n    TRUE ~ NA_character_\n  ))  \n\nfrq(check1$seg_sub3) # ok\n\nx &lt;character&gt; \n# total N=20761 valid N=19588 mean=1.39 sd=0.49\n\nValue |     N | Raw % | Valid % | Cum. %\n----------------------------------------\nAlto  | 11956 | 57.59 |   61.04 |  61.04\nBajo  |  7632 | 36.76 |   38.96 | 100.00\n&lt;NA&gt;  |  1173 |  5.65 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\nComo se señaló anteriormente, la concentración de casos en la escala de valores respaldan la decisión de establecer los puntos de corte para un grupo bajo (≤ 3) y uno alto (&gt; 3) de seguridad subjetiva.\n\n#reordenar alto, medio, bajo\ncheck1$seg_sub3 &lt;- factor(check1$seg_sub3, levels = c(\"Alto\", \"Bajo\"))\nfrq(check1$seg_sub3) # ok\n\nx &lt;categorical&gt; \n# total N=20761 valid N=19588 mean=1.39 sd=0.49\n\nValue |     N | Raw % | Valid % | Cum. %\n----------------------------------------\nAlto  | 11956 | 57.59 |   61.04 |  61.04\nBajo  |  7632 | 36.76 |   38.96 | 100.00\n&lt;NA&gt;  |  1173 |  5.65 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n# recodificar r12_04 (desempleo migrantes) en muy de acuerdo = 1, el resto=0, sacando los NAs\ncheck1 &lt;- check1 %&gt;%\n  mutate(desempleo_migrantes5 = case_when(\n    r12_04 == 5 ~ \"Muy de acuerdo\",\n    r12_04 %in% c(1, 2, 3, 4) ~ \"Otro\",\n    TRUE ~ NA_character_\n  ))\nfrq(check1$desempleo_migrantes5) # ok\n\nx &lt;character&gt; \n# total N=20761 valid N=20456 mean=1.88 sd=0.32\n\nValue          |     N | Raw % | Valid % | Cum. %\n-------------------------------------------------\nMuy de acuerdo |  2418 | 11.65 |   11.82 |  11.82\nOtro           | 18038 | 86.88 |   88.18 | 100.00\n&lt;NA&gt;           |   305 |  1.47 |    &lt;NA&gt; |   &lt;NA&gt;\n\n# recodificar r12_04 (desempleo migrantes) en muy en desacuerdo = 1, el resto=0, sacando los NAs\ncheck1 &lt;- check1 %&gt;%\n  mutate(desempleo_migrantes1 = case_when(\n    r12_04 == 1 ~ \"Muy en desacuerdo\",\n    r12_04 %in% c(2, 3, 4, 5) ~ \"Otro\",\n    TRUE ~ NA_character_\n  ))\nfrq(check1$desempleo_migrantes1) # ok\n\nx &lt;character&gt; \n# total N=20761 valid N=20456 mean=1.94 sd=0.25\n\nValue             |     N | Raw % | Valid % | Cum. %\n----------------------------------------------------\nMuy en desacuerdo |  1325 |  6.38 |    6.48 |   6.48\nOtro              | 19131 | 92.15 |   93.52 | 100.00\n&lt;NA&gt;              |   305 |  1.47 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n# recodificar c37_05 (restriccion migrantes) en muy de acuerdo = 1, el resto=0, sacando los NAs\ncheck1 &lt;- check1 %&gt;%\n  mutate(restriccion_migrantes5 = case_when(\n    c37_05 == 5 ~ \"Muy de acuerdo\",\n    c37_05 %in% c(1, 2, 3, 4) ~ \"Otro\",\n    TRUE ~ NA_character_\n  ))\nfrq(check1$restriccion_migrantes5) # ok\n\nx &lt;character&gt; \n# total N=20761 valid N=9532 mean=1.70 sd=0.46\n\nValue          |     N | Raw % | Valid % | Cum. %\n-------------------------------------------------\nMuy de acuerdo |  2825 | 13.61 |   29.64 |  29.64\nOtro           |  6707 | 32.31 |   70.36 | 100.00\n&lt;NA&gt;           | 11229 | 54.09 |    &lt;NA&gt; |   &lt;NA&gt;\n\n# recodificar c37_05 (restriccion migrantes) en muy en desacuerdo = 1, el resto=0, sacando los NAs\ncheck1 &lt;- check1 %&gt;%\n  mutate(restriccion_migrantes1 = case_when(\n    c37_05 == 1 ~ \"Muy en desacuerdo\",\n    c37_05 %in% c(2, 3, 4, 5) ~ \"Otro\",\n    TRUE ~ NA_character_\n  ))\nfrq(check1$restriccion_migrantes1) # ok\n\nx &lt;character&gt; \n# total N=20761 valid N=9532 mean=1.97 sd=0.16\n\nValue             |     N | Raw % | Valid % | Cum. %\n----------------------------------------------------\nMuy en desacuerdo |   239 |  1.15 |    2.51 |   2.51\nOtro              |  9293 | 44.76 |   97.49 | 100.00\n&lt;NA&gt;              | 11229 | 54.09 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\nAl examinar la distribución de las respuestas para las variables de migración, se observa que las categorías extremas concentran una fracción relativamente reducida de los casos: alrededor del 12% y el 14% para “Muy de acuerdo” y 6.5% y apenas 1.15% para “Muy en desacuerdo”. En contraste, cerca del 90% de las observaciones se ubican en categorías distintas a los extremos. Esta asimetría sugiere que, si bien es posible representar gráficamente los extremos frente al resto para enfatizar la presencia de posiciones polarizadas, la interpretación debe considerar que la mayor parte de la variación se concentra en la categoría agregada “Otro”. Por ello, dependiendo del objetivo analítico, puede ser preferible distinguir dos grupos (De acuerdo y En desacuerdo), lo que permite capturar con mayor claridad la disposición de las respuestas para fines visuales.\nTabla cruzada entre Seguridad Subjetiva y Restricción de Migrantes para observar los porcentajes y su distribución por ola\n\ntabla_cruzada &lt;- check1 %&gt;%\n  filter(!is.na(seg_sub3) & !is.na(restriccion_migrantes5) & restriccion_migrantes5 == \"Muy de acuerdo\") %&gt;%\n  group_by(ola, seg_sub3) %&gt;%\n  summarise(n = n()) %&gt;%  \n  group_by(ola) %&gt;%\n  mutate(total_ola = sum(n),\n         porcentaje = (n / total_ola) * 100) %&gt;%\n  ungroup()\n\nknitr::kable(tabla_cruzada, format = table_format, caption = \"Tabla cruzada de seguridad subjetiva y restricción migrantes (Muy de acuerdo) por ola - porcentaje dentro de ola\")\n\n\nTabla cruzada de seguridad subjetiva y restricción migrantes (Muy de acuerdo) por ola - porcentaje dentro de ola\n\n\nola\nseg_sub3\nn\ntotal_ola\nporcentaje\n\n\n\n\n3\nAlto\n335\n580\n57.75862\n\n\n3\nBajo\n245\n580\n42.24138\n\n\n4\nAlto\n290\n451\n64.30155\n\n\n4\nBajo\n161\n451\n35.69845\n\n\n5\nAlto\n259\n424\n61.08491\n\n\n5\nBajo\n165\n424\n38.91509\n\n\n6\nAlto\n375\n630\n59.52381\n\n\n6\nBajo\n255\n630\n40.47619\n\n\n7\nAlto\n429\n738\n58.13008\n\n\n7\nBajo\n309\n738\n41.86992\n\n\n\n\n\n\ntabla_cruzada &lt;- check1 %&gt;%\n  filter(!is.na(seg_sub3) & !is.na(restriccion_migrantes1) & restriccion_migrantes1 == \"Muy en desacuerdo\") %&gt;%\n  group_by(ola, seg_sub3) %&gt;%\n  summarise(n = n()) %&gt;%  \n  group_by(ola) %&gt;%\n  mutate(total_ola = sum(n),\n         porcentaje = (n / total_ola) * 100) %&gt;%\n  ungroup()\n\nknitr::kable(tabla_cruzada, format = table_format, caption = \"Tabla cruzada de seguridad subjetiva y restricción migrantes (Muy en desacuerdo) por ola - porcentaje dentro de ola\")\n\n\nTabla cruzada de seguridad subjetiva y restricción migrantes (Muy en desacuerdo) por ola - porcentaje dentro de ola\n\n\nola\nseg_sub3\nn\ntotal_ola\nporcentaje\n\n\n\n\n3\nAlto\n61\n94\n64.89362\n\n\n3\nBajo\n33\n94\n35.10638\n\n\n4\nAlto\n56\n85\n65.88235\n\n\n4\nBajo\n29\n85\n34.11765\n\n\n5\nAlto\n20\n33\n60.60606\n\n\n5\nBajo\n13\n33\n39.39394\n\n\n6\nAlto\n10\n13\n76.92308\n\n\n6\nBajo\n3\n13\n23.07692\n\n\n7\nAlto\n9\n14\n64.28571\n\n\n7\nBajo\n5\n14\n35.71429",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Dimensión: Seguridad pública</span>"
    ]
  },
  {
    "objectID": "migracion-rev.html#gráficos-seguridad-subjetiva-y-desempleo-migrantes",
    "href": "migracion-rev.html#gráficos-seguridad-subjetiva-y-desempleo-migrantes",
    "title": "1  Dimensión: Seguridad pública",
    "section": "2.6 Gráficos: Seguridad Subjetiva y Desempleo migrantes",
    "text": "2.6 Gráficos: Seguridad Subjetiva y Desempleo migrantes\n\n# Recodificar algo de acuerdo = 4 y muy de acuerdo = 5 como \"De acuerdo\", 3= \"ni de acuerdo ni desacuerdo\", y 1 y 2 como \"en desacuerdo, sacando los NAs\n\nelsoc_long &lt;- elsoc_long %&gt;%\n  mutate(desempleo_migrantes = case_when(\n    r12_04 %in% c(1, 2) ~ \"Totalmente en desacuerdo + desacuerdo\",\n    r12_04 == 3 ~ \"Ni de acuerdo ni en desacuerdo\",\n    r12_04 %in% c(4, 5) ~ \"Totalmente de acuerdo + de acuerdo\",\n    TRUE ~ NA_character_\n  ))\n\n# order from  \"En desacuerdo\", \"Ni de acuerdo ni en desacuerdo\", \"De acuerdo\"\nelsoc_long$desempleo_migrantes &lt;- factor(elsoc_long$desempleo_migrantes, levels = c(\"Totalmente en desacuerdo + desacuerdo\", \"Ni de acuerdo ni en desacuerdo\", \"Totalmente de acuerdo + de acuerdo\")) \n\nfrq(elsoc_long$desempleo_migrantes) # ok\n\nx &lt;categorical&gt; \n# total N=20761 valid N=20456 mean=2.18 sd=0.92\n\nValue                                 |     N | Raw % | Valid % | Cum. %\n------------------------------------------------------------------------\nTotalmente en desacuerdo + desacuerdo |  7106 | 34.23 |   34.74 |  34.74\nNi de acuerdo ni en desacuerdo        |  2594 | 12.49 |   12.68 |  47.42\nTotalmente de acuerdo + de acuerdo    | 10756 | 51.81 |   52.58 | 100.00\n&lt;NA&gt;                                  |   305 |  1.47 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n# generar indice promedio de seguridad subjetiva con t06_01 y t10\nelsoc_long &lt;- elsoc_long %&gt;% \n  mutate(seg_sub = rowMeans(select(., t06_01, t10), na.rm = TRUE))  \n\nfrq(elsoc_long$seg_sub) # ok\n\nx &lt;numeric&gt; \n# total N=20761 valid N=19588 mean=3.42 sd=0.97\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n 1.00 |  500 |  2.41 |    2.55 |   2.55\n 1.50 |  622 |  3.00 |    3.18 |   5.73\n 2.00 | 2060 |  9.92 |   10.52 |  16.24\n 2.50 | 1387 |  6.68 |    7.08 |  23.33\n 3.00 | 3063 | 14.75 |   15.64 |  38.96\n 3.50 | 1959 |  9.44 |   10.00 |  48.96\n 4.00 | 7309 | 35.21 |   37.31 |  86.28\n 4.50 | 1473 |  7.10 |    7.52 |  93.80\n 5.00 | 1215 |  5.85 |    6.20 | 100.00\n &lt;NA&gt; | 1173 |  5.65 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\ncheck2 &lt;- elsoc_long %&gt;%\n  select(ola, seg_sub, desempleo_migrantes, segmento, estrato, ponderador_long_total)\n\n# cheq\nfrq(check2$desempleo_migrantes) # ok\n\nx &lt;categorical&gt; \n# total N=20761 valid N=20456 mean=2.18 sd=0.92\n\nValue                                 |     N | Raw % | Valid % | Cum. %\n------------------------------------------------------------------------\nTotalmente en desacuerdo + desacuerdo |  7106 | 34.23 |   34.74 |  34.74\nNi de acuerdo ni en desacuerdo        |  2594 | 12.49 |   12.68 |  47.42\nTotalmente de acuerdo + de acuerdo    | 10756 | 51.81 |   52.58 | 100.00\n&lt;NA&gt;                                  |   305 |  1.47 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\ncheck2 &lt;- check2 %&gt;% # Se pondera la base\n  as_survey_design(ids = segmento, \n                   strata = estrato, \n                   weights = ponderador_long_total,\n                   nest = T)\n\ncheck2 %&gt;% \n  select(ola, seg_sub, desempleo_migrantes) %&gt;%\n  # FILTRAR PRIMERO: quitar la categoría intermedia ANTES de cualquier cálculo\n  filter(desempleo_migrantes != \"Ni de acuerdo ni en desacuerdo\") %&gt;%  # ajusta el nombre exacto\n  mutate(seg_sub = case_when(\n    seg_sub &lt;= 3 ~ \"Baja\",\n    seg_sub &gt; 3   ~ \"Alta\"\n  ),\n  desempleo_migrantes = forcats::fct_relabel(\n    desempleo_migrantes, ~ str_wrap(.x, 20))) %&gt;% \n  tidyr::drop_na() %&gt;% \n  filter(ola == last(ola)) %&gt;% \n  group_by(desempleo_migrantes, seg_sub) %&gt;%\n  survey_count(vartype = NULL) %&gt;% \n  group_by(seg_sub) %&gt;% \n  mutate(\n    prop  = 100 * n / sum(n),                 # porcentaje dentro de cada nivel de seguridad\n    label = scales::percent(prop/100, accuracy = 0.1)\n  ) %&gt;% \n  ggplot(aes(x = desempleo_migrantes, y = prop, fill = seg_sub)) +\n  geom_col(position = position_dodge(width = 0.6), width = 0.6) +\n  geom_text(\n    aes(label = label, color = seg_sub),\n    position = position_dodge(width = 0.6),\n    vjust = -0.4, size = 5, fontface = \"bold\", show.legend = FALSE\n  ) +\n  scale_fill_manual(\n    name = \"Seguridad subjetiva\",\n    values = c(\"Alta\" = \"#2b2f3c\", \"Baja\" = \"#F9913D\")\n  ) +\n  scale_color_manual(\n    values = c(\"Alta\" = \"#2b2f3c\", \"Baja\" = \"#F9913D\")\n  ) +\n  scale_y_continuous(\n    labels = function(p){paste0(p, \"%\")},\n    limits = c(0,100),\n    breaks = seq(0,100, by = 10),\n    expand = expansion(mult = c(0.02, 0.08))\n  )  + \n    labs(\n      x = \"Desempleo a causa de migrantes\",\n      y = NULL,\n      caption = \"Fuente: elaboración propia con datos de ELSOC 2023 \\n Nota: Para el cálculo se excluye la categoría intermedia (Ni de acuerdo ni en desacuerdo)\"\n    ) +\n  theme_ggdist() +\n  theme(\n    plot.title   = element_text(size = 24, face = \"bold\", hjust = 0.5),\n    plot.subtitle = element_text(size = 16, face = \"italic\", hjust = 0.5),\n    plot.caption = element_text(size = 14),\n    \n    axis.title.x = element_text(size = 18),\n    axis.title.y = element_text(size = 18),\n    axis.text.x  = element_text(size = 16),\n    axis.text.y  = element_text(size = 16),\n    \n    legend.title = element_text(size = 16, face = \"bold\"),\n    legend.text  = element_text(size = 14),\n    legend.box.background = element_rect(color = \"grey20\", fill = \"white\", linewidth = 0.5),\n    legend.background     = element_rect(fill = \"white\", color = NA),\n    legend.margin         = margin(t = 6, r = 8, b = 6, l = 8),\n    legend.box.margin     = margin(t = 6, r = 6, b = 6, l = 6),\n    \n    legend.position  = \"top\",\n    legend.direction = \"horizontal\"\n  ) +\n  guides(\n    color = guide_legend(\n      title.position = \"top\",\n      label.position = \"right\",\n      nrow = 1, byrow = TRUE,\n      keywidth = unit(14, \"pt\"),\n      keyheight = unit(10, \"pt\")\n    )\n  )\n\n\n\n\n\n\n\nFigure 2.1",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Dimensión: Seguridad pública</span>"
    ]
  },
  {
    "objectID": "migracion-rev.html#gráficos-seguridad-subjetiva-y-restricción-migrantes-longitudinal",
    "href": "migracion-rev.html#gráficos-seguridad-subjetiva-y-restricción-migrantes-longitudinal",
    "title": "1  Dimensión: Seguridad pública",
    "section": "2.7 Gráficos Seguridad Subjetiva y Restricción Migrantes (Longitudinal)",
    "text": "2.7 Gráficos Seguridad Subjetiva y Restricción Migrantes (Longitudinal)\n\n# Recodificar algo de acuerdo = 4 y muy de acuerdo = 5 como \"De acuerdo\", 3= \"ni de acuerdo ni desacuerdo\", y 1 y 2 como \"en desacuerdo, sacando los NAs\n\nelsoc_long &lt;- elsoc_long %&gt;%\n  mutate(restriccion_migrantes = case_when(\n    c37_05 %in% c(1, 2) ~ \"Totalmente en desacuerdo + desacuerdo\",\n    c37_05 == 3 ~ \"Ni de acuerdo ni en desacuerdo\",\n    c37_05 %in% c(4, 5) ~ \"Totalmente de acuerdo + de acuerdo\",\n    TRUE ~ NA_character_\n  ))\n\n# order from  \"En desacuerdo\", \"Ni de acuerdo ni en desacuerdo\", \"De acuerdo\"\nelsoc_long$restriccion_migrantes &lt;- factor(elsoc_long$restriccion_migrantes, levels = c(\"Totalmente en desacuerdo + desacuerdo\", \"Ni de acuerdo ni en desacuerdo\", \"Totalmente de acuerdo + de acuerdo\")) \n\nfrq(elsoc_long$restriccion_migrantes) # ok\n\nx &lt;categorical&gt; \n# total N=20761 valid N=9532 mean=2.65 sd=0.69\n\nValue                                 |     N | Raw % | Valid % | Cum. %\n------------------------------------------------------------------------\nTotalmente en desacuerdo + desacuerdo |  1184 |  5.70 |   12.42 |  12.42\nNi de acuerdo ni en desacuerdo        |  1004 |  4.84 |   10.53 |  22.95\nTotalmente de acuerdo + de acuerdo    |  7344 | 35.37 |   77.05 | 100.00\n&lt;NA&gt;                                  | 11229 | 54.09 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n# generar indice promedio de seguridad subjetiva con t06_01 y t10\nelsoc_long &lt;- elsoc_long %&gt;% \n  mutate(seg_sub = rowMeans(select(., t06_01, t10), na.rm = TRUE)) \n\nfrq(elsoc_long$seg_sub) # ok\n\nx &lt;numeric&gt; \n# total N=20761 valid N=19588 mean=3.42 sd=0.97\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n 1.00 |  500 |  2.41 |    2.55 |   2.55\n 1.50 |  622 |  3.00 |    3.18 |   5.73\n 2.00 | 2060 |  9.92 |   10.52 |  16.24\n 2.50 | 1387 |  6.68 |    7.08 |  23.33\n 3.00 | 3063 | 14.75 |   15.64 |  38.96\n 3.50 | 1959 |  9.44 |   10.00 |  48.96\n 4.00 | 7309 | 35.21 |   37.31 |  86.28\n 4.50 | 1473 |  7.10 |    7.52 |  93.80\n 5.00 | 1215 |  5.85 |    6.20 | 100.00\n &lt;NA&gt; | 1173 |  5.65 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n#Generar subset para nueva base ponderada\n\ncheck3 &lt;- elsoc_long %&gt;%\n  select(ola, seg_sub, restriccion_migrantes, segmento, estrato, ponderador_long_total)\n\n# cheq\nfrq(check3$restriccion_migrantes) # ok\n\nx &lt;categorical&gt; \n# total N=20761 valid N=9532 mean=2.65 sd=0.69\n\nValue                                 |     N | Raw % | Valid % | Cum. %\n------------------------------------------------------------------------\nTotalmente en desacuerdo + desacuerdo |  1184 |  5.70 |   12.42 |  12.42\nNi de acuerdo ni en desacuerdo        |  1004 |  4.84 |   10.53 |  22.95\nTotalmente de acuerdo + de acuerdo    |  7344 | 35.37 |   77.05 | 100.00\n&lt;NA&gt;                                  | 11229 | 54.09 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n#Recodificar seguridad subjetiva en baja y alta en la nueva base\n\ncheck3 &lt;- check3 %&gt;%\n  mutate(seg_sub2 = case_when(\n    seg_sub &gt;= 1 & seg_sub &lt;= 3 ~ \"Baja\",\n    seg_sub &gt; 3 & seg_sub &lt;= 5 ~ \"Alta\",\n    TRUE ~ NA_character_\n  ))  \ncheck3$seg_sub2 &lt;- factor(check3$seg_sub2, levels = c(\"Alta\", \"Baja\"))\nfrq(check3$seg_sub2)\n\nx &lt;categorical&gt; \n# total N=20761 valid N=19588 mean=1.39 sd=0.49\n\nValue |     N | Raw % | Valid % | Cum. %\n----------------------------------------\nAlta  | 11956 | 57.59 |   61.04 |  61.04\nBaja  |  7632 | 36.76 |   38.96 | 100.00\n&lt;NA&gt;  |  1173 |  5.65 |    &lt;NA&gt; |   &lt;NA&gt;",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Dimensión: Seguridad pública</span>"
    ]
  }
]